# 프로젝트 운영 문서

## 1. 프로젝트 개요

- **주제:** B-mode Guided Normalization (BGN)을 활용하여 초음파 기반 생체재료(PVA phantom)의 물성을 예측하는 AI 모델 개발
    
- **키워드:** PVA phantom, QUS(Quantitative Ultrasound), AI, B-mode, UTM, Verasonics 64E, L7-4, L22-14vX
    
- **최종 목표:** Verasonics로 취득한 초음파 데이터(B-mode + RF)를 BGN 및 QUS 분석을 통해 정규화하고, AI 모델을 통해 PVA phantom의 물성(Young’s modulus 등)을 예측
    

---

## 2. 연구 질문

1. **BGN이 QUS 파라미터 추정 정확도에 얼마나 기여하는가?**
    
2. **PVA 농도·동결해동 횟수 변화에 따른 초음파-QUS 패턴이 UTM 물성과 어떤 상관성을 갖는가?**
    
3. **AI 모델이 프로브 교체(L7-4 ↔ L22-14vX)나 농도 OOD(out-of-distribution) 상황에서 얼마나 일반화되는가?**
    

---

## 3. 데이터 수집 설계

### 3.1 샘플 설계

- PVA 농도: 2%, 4%, 6%, 8%, 10%
    
- 동결-해동: 0–3회
    
- 반복: n ≥ 5
    
- 환경: 22–25 °C, 동일 수조에서 초음파 및 UTM 수행
    

### 3.2 초음파 취득 (Verasonics 64E)

- **L7-4**: 5–7 MHz, depth 30–40 mm, plane-wave compounding(±10–14°)
    
- **L22-14vX**: 15–22 MHz, depth 8–15 mm, 동일 조건
    
- 저장: RF/IQ, B-mode, timetag, gain/TGC, probe ID, temperature
    
- 참조 팬텀: AC/BSC 알려진 reference 사용 → 시스템 전달함수 보정
    

### 3.3 라벨 취득 (UTM)

- ASTM D638 미니 도그본 or 표준 직사각형 시편
    
- 인장 시험 속도: 5 mm/min (표준화)
    
- 초음파 ROI와 동일 위치 매칭 → 마킹 및 기록
    

---

## 4. 데이터 처리

### 4.1 BGN 전처리

1. B-mode 생성 → ROI 세그멘테이션(U-Net)
    
2. ROI 내 엔벨로프 E(x,z)E(x,z)로 깊이별 정규화 맵 N(z)N(z) 산출
    
3. BGN 정규화: E~(x,z)=E(x,z)/(ϵ+N(z))\tilde{E}(x,z) = E(x,z) / (\epsilon + N(z))
    
4. Gain/TGC 역보정 + dB 스케일 변환
    
5. 패치 단위 추출(다중 스케일)
    

### 4.2 QUS 피처 추출

- AC(Attenuation coefficient): Spectral log difference / Reference Phantom Method
    
- BSC(Backscatter coefficient): 참조 팬텀 기반 추정
    
- ESD/EAC: Gaussian form factor 피팅
    
- Nakagami m, 스펙트럼 기울기, 엔트로피, SLSC 등 보조 피처
    

---

## 5. AI 모델 설계

### 5.1 구조

- **Branch A (BGN-B-mode):** CNN 기반 ROI 이미지 처리
    
- **Branch B (QUS 피처):** 1D/2D CNN or MLP
    
- **Fusion Layer:** 두 branch 결합 후 회귀 헤드
    
- **출력:** Young’s modulus, 보조 타깃(AC, ESD/EAC 등)
    

### 5.2 학습 전략

- 멀티태스크 손실:
    
    L=λMLmodulus+λACLAC+λphysLconsistencyL = \lambda_M L_{modulus} + \lambda_{AC} L_{AC} + \lambda_{phys} L_{consistency}
- 불확실성 추정(Heteroscedastic regression)
    
- 도메인 적응: probe ID 임베딩 + gain/TGC 증강
    

---

## 6. 검증 계획

- **Leave-concentration-out**: 새 농도 예측 능력 확인
    
- **Leave-probe-out**: 프로브 교체 시 일반화 성능 평가
    
- **재현성(CoV)**: 반복 측정 변동성 평가
    
- 지표: MAE, RMSE, R², Spearman ρ, Bland-Altman 분석
    

---

## 7. 베이스라인

1. **물리 기반 회귀**: AC/ESD/EAC → XGBoost or Ridge regression
    
2. **SWE 기반 비교**: 가능 시 SWE로 산출한 modulus와 상관성 비교
    

---

## 8. 일정표 (10주)

- **W1–2:** PVA 제조 SOP, 참조 팬텀 교정, Verasonics 시퀀스 고정
    
- **W3–4:** 데이터 수집 (L7-4, L22-14vX), UTM 라벨링
    
- **W5:** BGN 전처리 + QUS 파이프라인 확정
    
- **W6–7:** 베이스라인 모델 학습 및 분석
    
- **W8–9:** BGN-AI 이중 분기 모델 학습 및 어블레이션
    
- **W10:** 결과 분석, 포스터/보고서 준비
    

---

## 9. 리스크 관리

- **UTM–초음파 위치 불일치** → 시편 마킹 & 좌표 기록
    
- **온도·수화 영향** → 수조 온도 로깅 & 표준화
    
- **Gain/TGC 편차** → 참조 팬텀 기반 보정 + BGN 적용
    
- **기포·경계 아티팩트** → ROI 마스크 및 가중치 적용
    

---

## 10. 최소 구현 체크리스트

- 취득 프로토콜 고정 (Tx/Rx, gain, TGC)
    
- 데이터 저장 스키마 확립 (MAT/HDF5, meta.yaml 포함)
    
- BGN 전처리 코드 작성 (ROI-U-Net → N(z) → 정규화)
    
- QUS 피처 추출 및 베이스라인 회귀 구현
    
- Leave-concentration/probe-out 평가 수행
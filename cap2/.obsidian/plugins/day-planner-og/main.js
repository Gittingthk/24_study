/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Xc=Object.create;var Zn=Object.defineProperty;var Kc=Object.getOwnPropertyDescriptor;var Jc=Object.getOwnPropertyNames;var eu=Object.getPrototypeOf,tu=Object.prototype.hasOwnProperty;var Va=e=>{throw TypeError(e)};var ru=(e,t,r)=>t in e?Zn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var nu=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ou=(e,t)=>{for(var r in t)Zn(e,r,{get:t[r],enumerable:!0})},Ha=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Jc(t))!tu.call(e,o)&&o!==r&&Zn(e,o,{get:()=>t[o],enumerable:!(n=Kc(t,o))||n.enumerable});return e};var iu=(e,t,r)=>(r=e!=null?Xc(eu(e)):{},Ha(t||!e||!e.__esModule?Zn(r,"default",{value:e,enumerable:!0}):r,e)),su=e=>Ha(Zn({},"__esModule",{value:!0}),e);var J=(e,t,r)=>ru(e,typeof t!="symbol"?t+"":t,r),ts=(e,t,r)=>t.has(e)||Va("Cannot "+r);var h=(e,t,r)=>(ts(e,t,"read from private field"),r?r.call(e):t.get(e)),V=(e,t,r)=>t.has(e)?Va("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),L=(e,t,r,n)=>(ts(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),X=(e,t,r)=>(ts(e,t,"access private method"),r);var sl=nu(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});var ee=require("obsidian"),rs="YYYY-MM-DD",ns="gggg-[W]ww",za="YYYY-MM",Za="YYYY-[Q]Q",qa="YYYY";function qn(e){let t=window.app.plugins.getPlugin("periodic-notes");return t&&t.settings?.[e]?.enabled}function Qn(){try{let{internalPlugins:e,plugins:t}=window.app;if(qn("daily")){let{format:i,folder:s,template:a}=t.getPlugin("periodic-notes")?.settings?.daily||{};return{format:i||rs,folder:s?.trim()||"",template:a?.trim()||""}}let{folder:r,format:n,template:o}=e.getPluginById("daily-notes")?.instance?.options||{};return{format:n||rs,folder:r?.trim()||"",template:o?.trim()||""}}catch(e){console.info("No custom daily note settings found!",e)}}function Xn(){try{let e=window.app.plugins,t=e.getPlugin("calendar")?.options,r=e.getPlugin("periodic-notes")?.settings?.weekly;if(qn("weekly"))return{format:r.format||ns,folder:r.folder?.trim()||"",template:r.template?.trim()||""};let n=t||{};return{format:n.weeklyNoteFormat||ns,folder:n.weeklyNoteFolder?.trim()||"",template:n.weeklyNoteTemplate?.trim()||""}}catch(e){console.info("No custom weekly note settings found!",e)}}function Kn(){let e=window.app.plugins;try{let t=qn("monthly")&&e.getPlugin("periodic-notes")?.settings?.monthly||{};return{format:t.format||za,folder:t.folder?.trim()||"",template:t.template?.trim()||""}}catch(t){console.info("No custom monthly note settings found!",t)}}function Jn(){let e=window.app.plugins;try{let t=qn("quarterly")&&e.getPlugin("periodic-notes")?.settings?.quarterly||{};return{format:t.format||Za,folder:t.folder?.trim()||"",template:t.template?.trim()||""}}catch(t){console.info("No custom quarterly note settings found!",t)}}function eo(){let e=window.app.plugins;try{let t=qn("yearly")&&e.getPlugin("periodic-notes")?.settings?.yearly||{};return{format:t.format||qa,folder:t.folder?.trim()||"",template:t.template?.trim()||""}}catch(t){console.info("No custom yearly note settings found!",t)}}function Qa(...e){let t=[];for(let n=0,o=e.length;n<o;n++)t=t.concat(e[n].split("/"));let r=[];for(let n=0,o=t.length;n<o;n++){let i=t[n];!i||i==="."||r.push(i)}return t[0]===""&&r.unshift(""),r.join("/")}function au(e){let t=e.substring(e.lastIndexOf("/")+1);return t.lastIndexOf(".")!=-1&&(t=t.substring(0,t.lastIndexOf("."))),t}async function lu(e){let t=e.replace(/\\/g,"/").split("/");if(t.pop(),t.length){let r=Qa(...t);window.app.vault.getAbstractFileByPath(r)||await window.app.vault.createFolder(r)}}async function to(e,t){t.endsWith(".md")||(t+=".md");let r=ee.normalizePath(Qa(e,t));return await lu(r),r}async function fn(e){let{metadataCache:t,vault:r}=window.app,n=ee.normalizePath(e);if(n==="/")return Promise.resolve(["",null]);try{let o=t.getFirstLinkpathDest(n,""),i=await r.cachedRead(o),s=window.app.foldManager.load(o);return[i,s]}catch(o){return console.error(`Failed to read the daily note template '${n}'`,o),new ee.Notice("Failed to read the daily note template"),["",null]}}function wt(e,t="day"){let r=e.clone().startOf(t).format();return`${t}-${r}`}function Xa(e){return e.replace(/\[[^\]]*\]/g,"")}function fu(e,t){if(t==="week"){let r=Xa(e);return/w{1,2}/i.test(r)&&(/M{1,4}/.test(r)||/D{1,4}/.test(r))}return!1}function cn(e,t){return Ka(e.basename,t)}function cu(e,t){return Ka(au(e),t)}function Ka(e,t){let n={day:Qn,week:Xn,month:Kn,quarter:Jn,year:eo}[t]().format.split("/").pop(),o=window.moment(e,n,!0);if(!o.isValid())return null;if(fu(n,t)&&t==="week"){let i=Xa(n);if(/w{1,2}/i.test(i))return window.moment(e,n.replace(/M{1,4}/g,"").replace(/D{1,4}/g,""),!1)}return o}var os=class extends Error{};async function Ja(e){let t=window.app,{vault:r}=t,n=window.moment,{template:o,format:i,folder:s}=Qn(),[a,l]=await fn(o),f=e.format(i),d=await to(s,f);try{let u=await r.create(d,a.replace(/{{\s*date\s*}}/gi,f).replace(/{{\s*time\s*}}/gi,n().format("HH:mm")).replace(/{{\s*title\s*}}/gi,f).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(c,p,g,A,_,v)=>{let B=n(),D=e.clone().set({hour:B.get("hour"),minute:B.get("minute"),second:B.get("second")});return g&&D.add(parseInt(A,10),_),v?D.format(v.substring(1).trim()):D.format(i)}).replace(/{{\s*yesterday\s*}}/gi,e.clone().subtract(1,"day").format(i)).replace(/{{\s*tomorrow\s*}}/gi,e.clone().add(1,"d").format(i)));return t.foldManager.save(u,l),u}catch(u){console.error(`Failed to create file: '${d}'`,u),new ee.Notice("Unable to create new file.")}}function uu(e,t){return t[wt(e,"day")]??null}function pu(){let{vault:e}=window.app,{folder:t}=Qn(),r=e.getAbstractFileByPath(ee.normalizePath(t));if(!r)throw new os("Failed to find daily notes folder");let n={};return ee.Vault.recurseChildren(r,o=>{if(o instanceof ee.TFile){let i=cn(o,"day");if(i){let s=wt(i,"day");n[s]=o}}}),n}var is=class extends Error{};function du(){let{moment:e}=window,t=e.localeData()._week.dow,r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(;t;)r.push(r.shift()),t--;return r}function mu(e){return du().indexOf(e.toLowerCase())}async function el(e){let{vault:t}=window.app,{template:r,format:n,folder:o}=Xn(),[i,s]=await fn(r),a=e.format(n),l=await to(o,a);try{let f=await t.create(l,i.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,u,c,p,g,A)=>{let _=window.moment(),v=e.clone().set({hour:_.get("hour"),minute:_.get("minute"),second:_.get("second")});return c&&v.add(parseInt(p,10),g),A?v.format(A.substring(1).trim()):v.format(n)}).replace(/{{\s*title\s*}}/gi,a).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi,(d,u,c)=>{let p=mu(u);return e.weekday(p).format(c.trim())}));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${l}'`,f),new ee.Notice("Unable to create new file.")}}function hu(e,t){return t[wt(e,"week")]??null}function _u(){let e={};if(!rl())return e;let{vault:t}=window.app,{folder:r}=Xn(),n=t.getAbstractFileByPath(ee.normalizePath(r));if(!n)throw new is("Failed to find weekly notes folder");return ee.Vault.recurseChildren(n,o=>{if(o instanceof ee.TFile){let i=cn(o,"week");if(i){let s=wt(i,"week");e[s]=o}}}),e}var ss=class extends Error{};async function tl(e){let{vault:t}=window.app,{template:r,format:n,folder:o}=Kn(),[i,s]=await fn(r),a=e.format(n),l=await to(o,a);try{let f=await t.create(l,i.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,u,c,p,g,A)=>{let _=window.moment(),v=e.clone().set({hour:_.get("hour"),minute:_.get("minute"),second:_.get("second")});return c&&v.add(parseInt(p,10),g),A?v.format(A.substring(1).trim()):v.format(n)}).replace(/{{\s*date\s*}}/gi,a).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,a));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${l}'`,f),new ee.Notice("Unable to create new file.")}}function gu(e,t){return t[wt(e,"month")]??null}function vu(){let e={};if(!nl())return e;let{vault:t}=window.app,{folder:r}=Kn(),n=t.getAbstractFileByPath(ee.normalizePath(r));if(!n)throw new ss("Failed to find monthly notes folder");return ee.Vault.recurseChildren(n,o=>{if(o instanceof ee.TFile){let i=cn(o,"month");if(i){let s=wt(i,"month");e[s]=o}}}),e}var as=class extends Error{};async function bu(e){let{vault:t}=window.app,{template:r,format:n,folder:o}=Jn(),[i,s]=await fn(r),a=e.format(n),l=await to(o,a);try{let f=await t.create(l,i.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,u,c,p,g,A)=>{let _=window.moment(),v=e.clone().set({hour:_.get("hour"),minute:_.get("minute"),second:_.get("second")});return c&&v.add(parseInt(p,10),g),A?v.format(A.substring(1).trim()):v.format(n)}).replace(/{{\s*date\s*}}/gi,a).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,a));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${l}'`,f),new ee.Notice("Unable to create new file.")}}function Au(e,t){return t[wt(e,"quarter")]??null}function yu(){let e={};if(!ol())return e;let{vault:t}=window.app,{folder:r}=Jn(),n=t.getAbstractFileByPath(ee.normalizePath(r));if(!n)throw new as("Failed to find quarterly notes folder");return ee.Vault.recurseChildren(n,o=>{if(o instanceof ee.TFile){let i=cn(o,"quarter");if(i){let s=wt(i,"quarter");e[s]=o}}}),e}var ls=class extends Error{};async function wu(e){let{vault:t}=window.app,{template:r,format:n,folder:o}=eo(),[i,s]=await fn(r),a=e.format(n),l=await to(o,a);try{let f=await t.create(l,i.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,u,c,p,g,A)=>{let _=window.moment(),v=e.clone().set({hour:_.get("hour"),minute:_.get("minute"),second:_.get("second")});return c&&v.add(parseInt(p,10),g),A?v.format(A.substring(1).trim()):v.format(n)}).replace(/{{\s*date\s*}}/gi,a).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,a));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${l}'`,f),new ee.Notice("Unable to create new file.")}}function xu(e,t){return t[wt(e,"year")]??null}function Eu(){let e={};if(!il())return e;let{vault:t}=window.app,{folder:r}=eo(),n=t.getAbstractFileByPath(ee.normalizePath(r));if(!n)throw new ls("Failed to find yearly notes folder");return ee.Vault.recurseChildren(n,o=>{if(o instanceof ee.TFile){let i=cn(o,"year");if(i){let s=wt(i,"year");e[s]=o}}}),e}function Cu(){let{app:e}=window,t=e.internalPlugins.plugins["daily-notes"];if(t&&t.enabled)return!0;let r=e.plugins.getPlugin("periodic-notes");return r&&r.settings?.daily?.enabled}function rl(){let{app:e}=window;if(e.plugins.getPlugin("calendar"))return!0;let t=e.plugins.getPlugin("periodic-notes");return t&&t.settings?.weekly?.enabled}function nl(){let{app:e}=window,t=e.plugins.getPlugin("periodic-notes");return t&&t.settings?.monthly?.enabled}function ol(){let{app:e}=window,t=e.plugins.getPlugin("periodic-notes");return t&&t.settings?.quarterly?.enabled}function il(){let{app:e}=window,t=e.plugins.getPlugin("periodic-notes");return t&&t.settings?.yearly?.enabled}function ku(e){let t={day:Qn,week:Xn,month:Kn,quarter:Jn,year:eo}[e];return t()}function Tu(e,t){return{day:Ja,month:tl,week:el}[e](t)}G.DEFAULT_DAILY_NOTE_FORMAT=rs;G.DEFAULT_MONTHLY_NOTE_FORMAT=za;G.DEFAULT_QUARTERLY_NOTE_FORMAT=Za;G.DEFAULT_WEEKLY_NOTE_FORMAT=ns;G.DEFAULT_YEARLY_NOTE_FORMAT=qa;G.appHasDailyNotesPluginLoaded=Cu;G.appHasMonthlyNotesPluginLoaded=nl;G.appHasQuarterlyNotesPluginLoaded=ol;G.appHasWeeklyNotesPluginLoaded=rl;G.appHasYearlyNotesPluginLoaded=il;G.createDailyNote=Ja;G.createMonthlyNote=tl;G.createPeriodicNote=Tu;G.createQuarterlyNote=bu;G.createWeeklyNote=el;G.createYearlyNote=wu;G.getAllDailyNotes=pu;G.getAllMonthlyNotes=vu;G.getAllQuarterlyNotes=yu;G.getAllWeeklyNotes=_u;G.getAllYearlyNotes=Eu;G.getDailyNote=uu;G.getDailyNoteSettings=Qn;G.getDateFromFile=cn;G.getDateFromPath=cu;G.getDateUID=wt;G.getMonthlyNote=gu;G.getMonthlyNoteSettings=Kn;G.getPeriodicNoteSettings=ku;G.getQuarterlyNote=Au;G.getQuarterlyNoteSettings=Jn;G.getTemplateInfo=fn;G.getWeeklyNote=hu;G.getWeeklyNoteSettings=Xn;G.getYearlyNote=xu;G.getYearlyNoteSettings=eo});var Km={};ou(Km,{default:()=>Ji});module.exports=su(Km);var Un=require("obsidian");var Ga="YYYYMMDD",ja=/(?<target>{{date:?(?<date>[^}]*)}})/g;var Yo=`## Day Planner
- [ ] `,ln="timeline";var ie={lineColor:"#CAD5CA",timelineColorBegin:"#008183",timelineColorEnd:"#4d194d",timelineHoverColorBegin:"#83003f",timelineHoverColorEnd:"#5d0e2e"},Ua=["any-key","audio-file","blocks","broken-link","bullet-list","calendar-with-checkmark","checkmark","create-new","cross","cross-in-box","crossed-star","dice","document","documents","dot-network","enter","expand-vertically","filled-pin","folder","gear","go-to-file","hashtag","help","horizontal-split","image-file","info","install","languages","left-arrow","left-arrow-with-tail","lines-of-text","link","logo-crystal","magnifying-glass","microphone","microphone-filled","open-vault","pane-layout","paper-plane","pdf-file","pencil","pin","popup-open","presentation","reset","right-arrow","right-arrow-with-tail","right-triangle","search","sheets-in-box","star","star-list","switch","three-horizontal-bars","trash","two-columns","up-and-down-arrows","uppercase-lowercase-a","vault","vertical-split","vertical-three-dots"];var Vo=require("obsidian"),Ho=iu(sl());var z=class e{static getInstance(){return e.instance||(e.instance=new e),e.instance}updateSettings(t){this.config=t}logDebug(t,...r){this.config.current().debug&&console.debug("(DP)",t,...r)}logInfo(t,...r){console.info("(DP)",t,...r)}logError(t,...r){console.error("(DP)",t,...r)}};var Or=class{replace(t){let r=t,n=[...r.matchAll(ja)];if(n.length===0)return t;let o=new Date,i=n.map(a=>{let l=a.groups.date===""?Ga:a.groups.date;return[a.groups.target,this.getMoment(o,l)]}),s=r;for(let a of i)s=s.replace(a[0],a[1]);return s}getMoment(t,r){return window.moment(t).format(r)}};var Wo=class{constructor(){this.customFolder="Day Planners";this.debug=!1;this.mode="File";this.mermaid=!1;this.completePastItems=!0;this.circularProgress=!1;this.nowAndNextInStatusBar=!1;this.showTaskNotification=!1;this.timelineZoomLevel=4;this.timelineIcon="calendar-with-checkmark";this.plannerLabel="Day Planner";this.breakLabel="BREAK";this.endLabel="END";this.markCurrent=!1;this.correctLabels=!0;this.writer=void 0;this.preserveValues="-";this.hideTimelineValues="";this.autoResumeScroll=!0;this.autoResumeScrollDelay=3e3;this.newDayStartsAt=0;this.activePlan={}}};function al(e){if(!e.notesToDates)return!1;let t=new fs().active(e.notesToDates);if(t){let r=new Date(t.date),n=new Date(r);n.setHours(e.newDayStartsAt,0,0,0),e.activePlan={notePath:t.notePath,anchorDate:n.getTime()}}return delete e.notesToDates,!0}var fs=class{exists(t){return t&&this.active(t)!==void 0}active(t){let r=new Date().toDateString();return t?.filter(n=>n.date===r)[0]}},ar=(n=>(n.File="File",n.Command="Command",n.Daily="Daily",n))(ar||{});var ro=class{constructor(t,r){this.vault=t,this.config=r,this.momentDateRegex=new Or}async createDailyNote(t){if(this.config.current().mode==="Daily"&&(0,Ho.appHasDailyNotesPluginLoaded)()){let{folder:r,format:n}=(0,Ho.getDailyNoteSettings)(),o=`${this.momentDateRegex.getMoment(t,n)}.md`,i=(0,Vo.normalizePath)(`${r}/${o}`);return await this.vault.adapter.exists(i)?i:null}if(this.config.current().mode==="File"){let n=`Day Planner-${this.momentDateRegex.getMoment(t,"YYYYMMDD")}.md`,o=`${this.config.current().customFolder}/${n}`;return await this.createFolderIfNotExists(this.config.current().customFolder),await this.createFileIfNotExists(o),o}return null}async createFolderIfNotExists(t){try{let r=(0,Vo.normalizePath)(t);await this.vault.adapter.exists(r,!1)||await this.vault.createFolder(r)}catch(r){z.getInstance().logError("error creating folder",t,r)}}async createFileIfNotExists(t){try{let r=(0,Vo.normalizePath)(t);await this.vault.adapter.exists(r,!1)||await this.vault.create(r,Yo)}catch(r){z.getInstance().logError("file does not exist",t,r)}}async processFile(t,r){try{return await this.vault.adapter.process(t,r)}catch(n){z.getInstance().logError("error processing file",t,n)}}};var xt=class{constructor(t,r){this.iAmWriter=r,this.empty=t.length<1,this.invalid=!1,this.items=t,this.past=[]}addItem(t){this.items.push(t),this.empty=!1}calculate(t){try{if(this.items.sort((r,n)=>r.time.getTime()-n.time.getTime()),this.items.length===0){this.empty=!0;return}this.items.forEach((r,n)=>{let o=this.items[n+1];if(r.time<t&&(r.isEnd||o&&t<o.time)?(this.current=r,r.isEnd&&(r.isPast=!0,this.past.push(r)),this.next=r.isEnd?null:o):r.time<t&&(r.isPast=!0,this.past.push(r)),o){let i=window.moment,s=i.duration(i(o.time).diff(i(r.time))).asMinutes();r.durationMins=s}})}catch(r){z.getInstance().logError("error updating item status",r)}}isCurrent(t){return t===this.current}activeItems(){return this.items.filter(t=>!t.hidden)}},cs=class{constructor(t,r,n,o,i,s,a,l,f,d){this.line=t,this.charIndex=r,this.status=n,this.isBreak=o,this.isEnd=i,this.time=s,this.rawTime=a,this.text=l,this.raw=f,this.hidden=d}},Go=class{constructor(t){this.config=t}getPlanItem(t,r,n,o,i,s,a,l,f){let d=this.getDisplayText(o,i,l),u=n&&this.config.current().hideTimelineValues.includes(n);return new cs(t,r,n,o,i,s,a,d,f,u)}getDisplayText(t,r,n){let o=this.config.current();return t&&o.correctLabels?o.breakLabel:r&&o.correctLabels?o.endLabel:n}};var no=class{constructor(t){this.config=t,this.planItemFactory=new Go(this.config),this.PLAN_PARSER_REGEX=/^(-?[\s]*\[?(?<completion>.)\]\s*?(?<hours>\d{1,2}):(?<minutes>\d{2})\s(?<text>.*?))$/i,this.updateSettings()}updateSettings(){let t=this.config.current();this.PLAN_START=`# ${t.plannerLabel}`;let r=this.sanitize(t.breakLabel);this.PLAN_BREAK=new RegExp(`^${r}(?=\\b|$)`,"i");let n=this.sanitize(t.endLabel);this.PLAN_END=new RegExp(`^${n}(?=\\b|$)`,"i")}sanitize(t){return t.replace(/\./g,"\\.").replace(/\*/g,"\\*").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]")}parseContent(t,r,n){let o=!1,i=t.split(`
`);if(i.forEach((s,a)=>{if(s.length!==0)if(o){let l=this.parseLine(a,s);l&&(r.addItem(l),o=!l.isEnd)}else s.trim().endsWith(this.PLAN_START)&&(o=!0)}),r.calculate(n),!r.empty&&r.iAmWriter)for(let s of r.items){let a=this.updateItemCompletion(s,r);i[s.line]=a}return i.join(`
`)}parseLine(t,r){try{let n=this.PLAN_PARSER_REGEX.exec(r);if(n){let o=n,i=o.groups.text,s=this.matches(i,this.PLAN_BREAK),a=this.matches(i,this.PLAN_END),l=new Date;return l.setHours(Number.parseInt(o.groups.hours,10)),l.setMinutes(Number.parseInt(o.groups.minutes,10)),l.setSeconds(0),this.planItemFactory.getPlanItem(t,o.index,o.groups.completion,s,a,l,`${o.groups.hours.padStart(2,"0")}:${o.groups.minutes}`,i,o[0])}}catch(n){z.getInstance().logError("error parsing line",r,n)}}updateItemCompletion(t,r){let n=t.status;return this.config.current().completePastItems&&(this.config.current().preserveValues.includes(n)||(t.isPast?n="x":this.config.current().markCurrent&&r.isCurrent(t)?n="/":n=" ")),`- [${n}] ${t.rawTime} ${t.text}`}matches(t,r){return r.test(t.trim())}getAnchorDate(){let t=this.config.current().activePlan.anchorDate;if(t)return new Date(t);let r=this.config.current().newDayStartsAt,n=new Date,o=new Date(n);return o.setMinutes(0,0,0),o.setHours(r),n.getHours()<r&&o.setDate(o.getDate()-1),o}};var us=require("obsidian");var un=class{constructor(t,r,n,o,i){this.workspace=t,this.config=r,this.file=n,this.parser=o,this.progress=i}async insertPlanner(t){let n=this.workspace.getActiveViewOfType(us.MarkdownView).editor.getCursor().line;await this.file.processFile(t,o=>{let i=o.split(`
`);return[...i.slice(0,n),...Yo.split(`
`),...i.slice(n)].join(`
`)})}async processDayPlanner(t,r){try{let n=new xt([],t),o=new Date;return await this.file.processFile(r,i=>this.parser.parseContent(i,n,o)),n}catch(n){z.getInstance().logError("error processing file",t,r,this.file,n)}}checkIsDayPlannerEditing(t){let r=this.workspace.getActiveViewOfType(us.MarkdownView);if(r==null)return;let n=r.getState();t&&n.file===t&&(this.dayPlannerLastEdit=Date.now())}};var pn=window.moment,oo=class{getProgress(t,r){try{let o=pn(new Date),i=pn(t.time),s=pn(r.time),a=pn.duration(s.diff(i)),l=pn.duration(o.diff(i)),f=pn.duration(s.diff(o)),d=l.asMinutes()/a.asMinutes()*100,u=f.asMinutes().toFixed(0);return{percentageComplete:d,minsUntilNext:u}}catch(n){z.getInstance().logError("error updating progress",t,r,n)}}progressMarkdown(t,r){try{let{percentageComplete:n}=this.getProgress(t,r),o=Math.floor(20*(n/100));return new Array(o).join("->")+new Array(20-o).join("_ ")}catch(n){z.getInstance().logError("error updating markdown",t,r,n)}}};var te=require("obsidian");var jo=class extends te.PluginSettingTab{constructor(r,n){super(r,n);this.momentDateRegex=new Or;this.plugin=n}async save(){await this.plugin.saveData(this.plugin.settings),z.getInstance().logDebug("Settings saved")}hide(){this.save()}display(){let{containerEl:r}=this;r.empty(),new te.Setting(r).setName("Day Planner mode").setDesc(this.modeDescriptionContent()).addDropdown(s=>s.addOption(ar.File,"File mode").addOption(ar.Command,"Command mode").addOption(ar.Daily,"Daily mode").setValue(ar[this.plugin.settings.mode]||"File".toString()).onChange(a=>{this.plugin.settings.mode=ar[a]})),new te.Setting(r).setName("File mode folder").setDesc("The folder where Day Planner files will be automatically created in File mode. Default: Day Planners").addText(s=>s.setPlaceholder("Day Planners").setValue(this.plugin.settings.customFolder||"Day Planners").onChange(a=>{this.plugin.settings.customFolder=a.trim()||"Day Planners"})),new te.Setting(r).setName("Complete past planner items").setDesc("The plugin will automatically mark checkboxes for tasks and breaks in the past as complete (x)").addToggle(s=>s.setValue(this.plugin.settings.completePastItems).onChange(a=>{this.plugin.settings.completePastItems=a})),new te.Setting(r).setName("Mark in progress planner item").setDesc("The plugin will automatically mark the textbox for the current item as in progress (/)").addToggle(s=>s.setValue(this.plugin.settings.markCurrent).onChange(a=>{this.plugin.settings.markCurrent=a})),new te.Setting(r).setName("Status bar - circular progress").setDesc("Display a circular progress bar in the status bar").addToggle(s=>s.setValue(this.plugin.settings.circularProgress).onChange(a=>{this.plugin.settings.circularProgress=a})),new te.Setting(r).setName("Status bar - now and next").setDesc("Display now and next tasks in the status bar").addToggle(s=>s.setValue(this.plugin.settings.nowAndNextInStatusBar).onChange(a=>{this.plugin.settings.nowAndNextInStatusBar=a})),new te.Setting(r).setName("Task notification").setDesc("Display a notification when a new task is started").addToggle(s=>s.setValue(this.plugin.settings.showTaskNotification).onChange(a=>{this.plugin.settings.showTaskNotification=a})),new te.Setting(r).setName("Timeline zoom level").setDesc("The zoom level to display the timeline. The higher the number, the more vertical space each task will take up.").addSlider(s=>s.setLimits(1,5,1).setValue(this.plugin.settings.timelineZoomLevel??4).setDynamicTooltip().onChange(a=>{this.plugin.settings.timelineZoomLevel=a})),new te.Setting(r).setName("Auto-resume timeline scroll").setDesc("Automatically resume timeline scrolling after manual scroll interaction stops.").addToggle(s=>s.setValue(this.plugin.settings.autoResumeScroll).onChange(a=>{this.plugin.settings.autoResumeScroll=a}));let n=new te.Setting(r).setName("Auto-resume scroll delay"),o=()=>{let s=this.plugin.settings.autoResumeScrollDelay;s<1e3||s>1e4?n.setDesc(`\u26A0\uFE0F Value must be between 1000-10000ms. Currently: ${s}ms`):n.setDesc(`Auto-resume timeline scrolling (1000-10000ms) after manual interaction stops. Currently: ${s}ms`)};o(),n.addText(s=>s.setValue(this.plugin.settings.autoResumeScrollDelay.toString()).setPlaceholder("3000").onChange(a=>{let l=Number(a);!Number.isNaN(l)&&l>=1e3&&l<=1e4&&(this.plugin.settings.autoResumeScrollDelay=l),o()})),new te.Setting(r).setName("Timeline icon").setDesc("The icon of the timeline pane. Reopen timeline pane or restart obsidian to see the change.").addDropdown(s=>{for(let a of Ua)s.addOption(a,a);return s.setValue(this.plugin.settings.timelineIcon??"calendar-with-checkmark").onChange(a=>{this.plugin.settings.timelineIcon=a})});let i={};new te.Setting(r).setName("Timeline colors").setDesc("Gradient colors for the timeline (line, begin, end, hover begin, hover end, reset).").addColorPicker(s=>{s.setValue(this.plugin.settings.lineColor??ie.lineColor).onChange(a=>{this.plugin.settings.lineColor=a}),i.lineColor=s}).addColorPicker(s=>{s.setValue(this.plugin.settings.timelineColorBegin??ie.timelineColorBegin).onChange(a=>{this.plugin.settings.timelineColorBegin=a}),i.timelineColorBegin=s}).addColorPicker(s=>{s.setValue(this.plugin.settings.timelineColorEnd??ie.timelineColorEnd).onChange(a=>{this.plugin.settings.timelineColorEnd=a}),i.timelineColorEnd=s}).addColorPicker(s=>{s.setValue(this.plugin.settings.timelineHoverColorBegin??ie.timelineHoverColorBegin).onChange(a=>{this.plugin.settings.timelineHoverColorBegin=a}),i.timelineHoverColorBegin=s}).addColorPicker(s=>{s.setValue(this.plugin.settings.timelineHoverColorEnd??ie.timelineHoverColorEnd).onChange(a=>{this.plugin.settings.timelineHoverColorEnd=a}),i.timelineHoverColorEnd=s}).addExtraButton(s=>{s.setTooltip("Reset to default colors").setIcon("reset").onClick(()=>{this.plugin.settings.lineColor=ie.lineColor,i.lineColor.setValue(ie.lineColor),this.plugin.settings.timelineColorBegin=ie.timelineColorBegin,i.timelineColorBegin.setValue(ie.timelineColorBegin),this.plugin.settings.timelineColorEnd=ie.timelineColorEnd,i.timelineColorEnd.setValue(ie.timelineColorEnd),this.plugin.settings.timelineHoverColorBegin=ie.timelineHoverColorBegin,i.timelineHoverColorBegin.setValue(ie.timelineHoverColorBegin),this.plugin.settings.timelineHoverColorEnd=ie.timelineHoverColorEnd,i.timelineHoverColorEnd.setValue(ie.timelineHoverColorEnd)})}),new te.Setting(r).setName("Day Planner heading").setDesc("Use this heading text to mark the beginning of the Day Planner.").addText(s=>s.setValue(this.plugin.settings.plannerLabel??"Day Planner").onChange(a=>{let l=a.trim();l.length>0&&(this.plugin.settings.plannerLabel=l)})),new te.Setting(r).setName("BREAK task label").setDesc("Use this label to mark break between tasks.").addText(s=>s.setValue(this.plugin.settings.breakLabel??"BREAK").onChange(a=>{this.plugin.settings.breakLabel=a})),new te.Setting(r).setName("END task label").setDesc("Use this label to mark the end of all tasks.").addText(s=>s.setValue(this.plugin.settings.endLabel??"END").onChange(a=>{this.plugin.settings.endLabel=a})),new te.Setting(r).setName("Consistent BREAK and END labels").setDesc("Replace BREAK and END task text in your planner with the configured label text (consistency)").addToggle(s=>s.setValue(this.plugin.settings.correctLabels).onChange(a=>{this.plugin.settings.correctLabels=a})),new te.Setting(r).setName("Preserve task values").setDesc("Preserve these values in the schedule, for example '-' for canceled, or '>' for rescheduled.").addText(s=>s.setValue(this.plugin.settings.preserveValues||"-").onChange(a=>{let l=a;l.length>0&&(l=[...new Set(l)].join("").replace("x","")),this.plugin.settings.preserveValues=l})),new te.Setting(r).setName("Hide tasks from the timeline").setDesc("Hide tasks with these values from the timeline view, for example '-' for canceled, or '>' for rescheduled.").addText(s=>s.setValue(this.plugin.settings.hideTimelineValues||"-").onChange(a=>{let l=a;l.length>0&&(l=[...new Set(l)].join("").replace("x","")),this.plugin.settings.hideTimelineValues=l})),new te.Setting(r).setName("New day starts at").setDesc("Hour when a new day begins (0-23). Times before this hour are treated as next day. Default: 0 (midnight). Example: Set to 4 if you work until 3 AM and want those tasks in the same planner.").addText(s=>s.setPlaceholder("0").setValue(this.plugin.settings.newDayStartsAt.toString()).onChange(a=>{let l=Number.parseInt(a,10);!Number.isNaN(l)&&l>=0&&l<=23&&(this.plugin.settings.newDayStartsAt=l)})),new te.Setting(r).setName("Debug").setDesc("Enable debug messages").addToggle(s=>s.setValue(this.plugin.settings.debug).onChange(a=>{this.plugin.settings.debug=a}))}modeDescriptionContent(){let r=document.createDocumentFragment();return r.appendText("Choose between 3 modes to use the Day Planner plugin:"),r.appendChild(document.createElement("br")),r.appendChild(document.createElement("strong")).appendText("File mode"),r.appendChild(document.createElement("br")),r.appendText("Plugin automatically generates day planner notes for each day within a configurable folder."),r.appendChild(document.createElement("br")),r.appendChild(document.createElement("strong")).appendText("Command mode"),r.appendChild(document.createElement("br")),r.appendText("Command used to insert a Day Planner for today within the current note."),r.appendChild(document.createElement("br")),r.appendChild(document.createElement("strong")).appendText("Daily mode"),r.appendChild(document.createElement("br")),r.appendText("Plugin automatically links to the current daily note. Daily notes plugin must be enabled."),r.appendChild(document.createElement("br")),this.addDocsLink(r),r}addDocsLink(r){let n=document.createElement("a");n.href="https://github.com/ebullient/obsidian-day-planner-og/blob/main/README.md",n.text="plugin README",n.target="_blank",r.appendChild(n),r.appendChild(document.createElement("br"))}};var io=class{constructor(t,r,n,o,i,s){this.config=t,this.statusBar=r,this.workspace=n,this.progress=o,this.plannerMD=i,this.file=s}initStatusBar(){if(this.statusBarAdded)return;let t=this.statusBar.createEl("div",{cls:"day-planner",title:"View the Day Planner",prepend:!0});this.setupCard(t),this.statusBarText=t.createEl("span",{cls:["status-bar-item-segment","day-planner-status-bar-text"]}),this.setupCircularProgressBar(t),this.setupHorizontalProgressBar(t),this.nextText=t.createEl("span",{cls:["status-bar-item-segment","day-planner-status-bar-text"]}),this.setupStatusBarEvents(t),this.statusBarAdded=!0}setupStatusBarEvents(t){t.onClickEvent(async()=>{try{let n=this.config.current().activePlan.notePath;n&&this.workspace.openLinkText(n,"",!1)}catch(r){z.getInstance().logError("error opening file from status bar",this.file,r)}}),t.on("mouseenter",".day-planner",()=>{this.show(this.card)}),t.on("mouseleave",".day-planner",()=>{this.hide(this.card)})}async refreshStatusBar(t){return!t.empty&&!t.invalid?(this.updateProgress(t.current,t.next),this.show(this.statusBar)):this.hide(this.statusBar),t}hide(t){t&&(t.style.display="none")}show(t){t&&(t.style.display="block")}hideProgress(){this.hide(this.statusBarProgress),this.hide(this.circle),this.hide(this.nextText)}updateProgress(t,r){let n=this.config.current();if(!t||!r||t.isEnd){this.hideProgress(),this.statusBarText.innerText=n.endLabel;return}let{percentageComplete:o,minsUntilNext:i}=this.progress.getProgress(t,r);n.circularProgress?(this.hide(this.statusBarProgress),this.progressCircle(o,t)):(this.hide(this.circle),this.progressBar(o,t)),this.statusText(i,t,r,o)}progressBar(t,r){r.isBreak?this.statusBarCurrentProgress.addClass("green"):this.statusBarCurrentProgress.removeClass("green"),this.statusBarCurrentProgress.style.width=`${t}%`,this.show(this.statusBarProgress)}progressCircle(t,r){r.isBreak?this.circle.addClass("green"):this.circle.removeClass("green"),this.circle.setAttr("data-value",t.toFixed(0)),this.show(this.circle)}statusText(t,r,n,o){let i=this.config.current(),s=t==="0"?"1":t,a=`${s} min${s==="1"?"":"s"}`;if(i.nowAndNextInStatusBar)this.statusBarText.innerHTML=`<strong>Now</strong> ${r.rawTime} ${this.ellipsis(r.text,10)}`,this.nextText.innerHTML=`<strong>Next</strong> ${n.rawTime} ${this.ellipsis(n.text,10)}`,this.show(this.nextText);else{this.hide(this.nextText);let c=r.isBreak?`${i.breakLabel} for ${a}`:`${a} left`;this.statusBarText.innerText=c}let l=`Current Task (${o.toFixed(0)}% complete)`,f=`${r.rawTime} ${r.text}`,d=`Next Task (in ${a})`,u=`${n.rawTime} ${n.text}`;this.cardCurrent.innerHTML=`<strong>${l}</strong><br> ${f}`,this.cardNext.innerHTML=`<strong>${d}</strong><br> ${u}`,this.taskNotification(r,f,d,u)}taskNotification(t,r,n,o){this.config.current().showTaskNotification&&this.currentTime!==void 0&&this.currentTime!==t.time.toUTCString()&&new Notification(`Task started, ${r}`,{body:`${n}: ${o}`,requireInteraction:!0}),this.currentTime=t.time.toUTCString()}ellipsis(t,r){return t.length<=r?t:`${t.substring(0,r)}...`}setupHorizontalProgressBar(t){this.statusBarProgress=t.createEl("div",{cls:["status-bar-item-segment","day-planner-progress-bar"]}),this.statusBarProgress.style.display="none",this.statusBarCurrentProgress=this.statusBarProgress.createEl("div",{cls:"day-planner-progress-value"})}setupCircularProgressBar(t){this.circle=t.createEl("div",{cls:["status-bar-item-segment","progress-pie day-planner"]})}setupCard(t){this.card=t.createEl("div",{cls:"day-planner-status-card"}),this.cardCurrent=this.card.createEl("span"),this.card.createEl("br"),this.card.createEl("br"),this.cardNext=this.card.createEl("span"),this.card.createEl("div",{cls:"arrow-down"})}};var{min:Nu,max:Pu}=Math,ft=(e,t=0,r=1)=>Nu(Pu(t,e),r);var Fr=e=>{e._clipped=!1,e._unclipped=e.slice(0);for(let t=0;t<=3;t++)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]=ft(e[t],0,255)):t===3&&(e[t]=ft(e[t],0,1));return e};var ll={};for(let e of["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"])ll[`[object ${e}]`]=e.toLowerCase();function x(e){return ll[Object.prototype.toString.call(e)]||"object"}var w=(e,t=null)=>e.length>=3?Array.prototype.slice.call(e):x(e[0])=="object"&&t?t.split("").filter(r=>e[0][r]!==void 0).map(r=>e[0][r]):e[0].slice(0);var Qe=e=>{if(e.length<2)return null;let t=e.length-1;return x(e[t])=="string"?e[t].toLowerCase():null};var{PI:Uo,min:zo,max:Zo}=Math,ke=e=>Math.round(e*100)/100,so=e=>Math.round(e*100)/100,ct=Uo*2,qo=Uo/3,fl=Uo/180,cl=180/Uo;function Qo(e){return[...e.slice(0,3).reverse(),...e.slice(3)]}var C={format:{},autodetect:[]};var ps=class{constructor(...t){let r=this;if(x(t[0])==="object"&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];let n=Qe(t),o=!1;if(!n){o=!0,C.sorted||(C.autodetect=C.autodetect.sort((i,s)=>s.p-i.p),C.sorted=!0);for(let i of C.autodetect)if(n=i.test(...t),n)break}if(C.format[n]){let i=C.format[n].apply(null,o?t:t.slice(0,-1));r._rgb=Fr(i)}else throw new Error("unknown format: "+t);r._rgb.length===3&&r._rgb.push(1)}toString(){return x(this.hex)=="function"?this.hex():`[${this._rgb.join(",")}]`}},m=ps;var ul="3.1.2";var pl=(...e)=>new m(...e);pl.version=ul;var P=pl;var Iu={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},wr=Iu;var $u=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Su=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Du=e=>{if(e.match($u)){(e.length===4||e.length===7)&&(e=e.substr(1)),e.length===3&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);let t=parseInt(e,16),r=t>>16,n=t>>8&255,o=t&255;return[r,n,o,1]}if(e.match(Su)){(e.length===5||e.length===9)&&(e=e.substr(1)),e.length===4&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);let t=parseInt(e,16),r=t>>24&255,n=t>>16&255,o=t>>8&255,i=Math.round((t&255)/255*100)/100;return[r,n,o,i]}throw new Error(`unknown hex color: ${e}`)},Xo=Du;var{round:Ko}=Math,Ru=(...e)=>{let[t,r,n,o]=w(e,"rgba"),i=Qe(e)||"auto";o===void 0&&(o=1),i==="auto"&&(i=o<1?"rgba":"rgb"),t=Ko(t),r=Ko(r),n=Ko(n);let a="000000"+(t<<16|r<<8|n).toString(16);a=a.substr(a.length-6);let l="0"+Ko(o*255).toString(16);switch(l=l.substr(l.length-2),i.toLowerCase()){case"rgba":return`#${a}${l}`;case"argb":return`#${l}${a}`;default:return`#${a}`}},Jo=Ru;m.prototype.name=function(){let e=Jo(this._rgb,"rgb");for(let t of Object.keys(wr))if(wr[t]===e)return t.toLowerCase();return e};C.format.named=e=>{if(e=e.toLowerCase(),wr[e])return Xo(wr[e]);throw new Error("unknown color name: "+e)};C.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&x(e)==="string"&&wr[e.toLowerCase()])return"named"}});m.prototype.alpha=function(e,t=!1){return e!==void 0&&x(e)==="number"?t?(this._rgb[3]=e,this):new m([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]};m.prototype.clipped=function(){return this._rgb._clipped||!1};var ao={Kn:18,labWhitePoint:"d65",Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452,kE:.008856451679035631,kKE:8,kK:903.2962962962963,RefWhiteRGB:{X:.95047,Y:1,Z:1.08883},MtxRGB2XYZ:{m00:.4124564390896922,m01:.21267285140562253,m02:.0193338955823293,m10:.357576077643909,m11:.715152155287818,m12:.11919202588130297,m20:.18043748326639894,m21:.07217499330655958,m22:.9503040785363679},MtxXYZ2RGB:{m00:3.2404541621141045,m01:-.9692660305051868,m02:.055643430959114726,m10:-1.5371385127977166,m11:1.8760108454466942,m12:-.2040259135167538,m20:-.498531409556016,m21:.041556017530349834,m22:1.0572251882231791},As:.9414285350000001,Bs:1.040417467,Cs:1.089532651,MtxAdaptMa:{m00:.8951,m01:-.7502,m02:.0389,m10:.2664,m11:1.7135,m12:-.0685,m20:-.1614,m21:.0367,m22:1.0296},MtxAdaptMaI:{m00:.9869929054667123,m01:.43230526972339456,m02:-.008528664575177328,m10:-.14705425642099013,m11:.5183602715367776,m12:.04004282165408487,m20:.15996265166373125,m21:.0492912282128556,m22:.9684866957875502}},Lt=ao,Lu=new Map([["a",[1.0985,.35585]],["b",[1.0985,.35585]],["c",[.98074,1.18232]],["d50",[.96422,.82521]],["d55",[.95682,.92149]],["d65",[.95047,1.08883]],["e",[1,1,1]],["f2",[.99186,.67393]],["f7",[.95041,1.08747]],["f11",[1.00962,.6435]],["icc",[.96422,.82521]]]);function ut(e){let t=Lu.get(String(e).toLowerCase());if(!t)throw new Error("unknown Lab illuminant "+e);ao.labWhitePoint=e,ao.Xn=t[0],ao.Zn=t[1]}function xr(){return ao.labWhitePoint}var Mu=(...e)=>{e=w(e,"lab");let[t,r,n]=e,[o,i,s]=Bu(t,r,n),[a,l,f]=ms(o,i,s);return[a,l,f,e.length>3?e[3]:1]},Bu=(e,t,r)=>{let{kE:n,kK:o,kKE:i,Xn:s,Yn:a,Zn:l}=Lt,f=(e+16)/116,d=.002*t+f,u=f-.005*r,c=d*d*d,p=u*u*u,g=c>n?c:(116*d-16)/o,A=e>i?Math.pow((e+16)/116,3):e/o,_=p>n?p:(116*u-16)/o,v=g*s,B=A*a,D=_*l;return[v,B,D]},ds=e=>{let t=Math.sign(e);return e=Math.abs(e),(e<=.0031308?e*12.92:1.055*Math.pow(e,1/2.4)-.055)*t},ms=(e,t,r)=>{let{MtxAdaptMa:n,MtxAdaptMaI:o,MtxXYZ2RGB:i,RefWhiteRGB:s,Xn:a,Yn:l,Zn:f}=Lt,d=a*n.m00+l*n.m10+f*n.m20,u=a*n.m01+l*n.m11+f*n.m21,c=a*n.m02+l*n.m12+f*n.m22,p=s.X*n.m00+s.Y*n.m10+s.Z*n.m20,g=s.X*n.m01+s.Y*n.m11+s.Z*n.m21,A=s.X*n.m02+s.Y*n.m12+s.Z*n.m22,_=(e*n.m00+t*n.m10+r*n.m20)*(p/d),v=(e*n.m01+t*n.m11+r*n.m21)*(g/u),B=(e*n.m02+t*n.m12+r*n.m22)*(A/c),D=_*o.m00+v*o.m10+B*o.m20,N=_*o.m01+v*o.m11+B*o.m21,j=_*o.m02+v*o.m12+B*o.m22,M=ds(D*i.m00+N*i.m10+j*i.m20),y=ds(D*i.m01+N*i.m11+j*i.m21),E=ds(D*i.m02+N*i.m12+j*i.m22);return[M*255,y*255,E*255]},dn=Mu;var Ou=(...e)=>{let[t,r,n,...o]=w(e,"rgb"),[i,s,a]=_s(t,r,n),[l,f,d]=Fu(i,s,a);return[l,f,d,...o.length>0&&o[0]<1?[o[0]]:[]]};function Fu(e,t,r){let{Xn:n,Yn:o,Zn:i,kE:s,kK:a}=Lt,l=e/n,f=t/o,d=r/i,u=l>s?Math.pow(l,1/3):(a*l+16)/116,c=f>s?Math.pow(f,1/3):(a*f+16)/116,p=d>s?Math.pow(d,1/3):(a*d+16)/116;return[116*c-16,500*(u-c),200*(c-p)]}function hs(e){let t=Math.sign(e);return e=Math.abs(e),(e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4))*t}var _s=(e,t,r)=>{e=hs(e/255),t=hs(t/255),r=hs(r/255);let{MtxRGB2XYZ:n,MtxAdaptMa:o,MtxAdaptMaI:i,Xn:s,Yn:a,Zn:l,As:f,Bs:d,Cs:u}=Lt,c=e*n.m00+t*n.m10+r*n.m20,p=e*n.m01+t*n.m11+r*n.m21,g=e*n.m02+t*n.m12+r*n.m22,A=s*o.m00+a*o.m10+l*o.m20,_=s*o.m01+a*o.m11+l*o.m21,v=s*o.m02+a*o.m12+l*o.m22,B=c*o.m00+p*o.m10+g*o.m20,D=c*o.m01+p*o.m11+g*o.m21,N=c*o.m02+p*o.m12+g*o.m22;return B*=A/f,D*=_/d,N*=v/u,c=B*i.m00+D*i.m10+N*i.m20,p=B*i.m01+D*i.m11+N*i.m21,g=B*i.m02+D*i.m12+N*i.m22,[c,p,g]},mn=Ou;m.prototype.lab=function(){return mn(this._rgb)};var Yu=(...e)=>new m(...e,"lab");Object.assign(P,{lab:Yu,getLabWhitePoint:xr,setLabWhitePoint:ut});C.format.lab=dn;C.autodetect.push({p:2,test:(...e)=>{if(e=w(e,"lab"),x(e)==="array"&&e.length===3)return"lab"}});m.prototype.darken=function(e=1){let t=this,r=t.lab();return r[0]-=Lt.Kn*e,new m(r,"lab").alpha(t.alpha(),!0)};m.prototype.brighten=function(e=1){return this.darken(-e)};m.prototype.darker=m.prototype.darken;m.prototype.brighter=m.prototype.brighten;m.prototype.get=function(e){let[t,r]=e.split("."),n=this[t]();if(r){let o=t.indexOf(r)-(t.substr(0,2)==="ok"?2:0);if(o>-1)return n[o];throw new Error(`unknown channel ${r} in mode ${t}`)}else return n};var{pow:Wu}=Math,Vu=1e-7,Hu=20;m.prototype.luminance=function(e,t="rgb"){if(e!==void 0&&x(e)==="number"){if(e===0)return new m([0,0,0,this._rgb[3]],"rgb");if(e===1)return new m([255,255,255,this._rgb[3]],"rgb");let r=this.luminance(),n=Hu,o=(s,a)=>{let l=s.interpolate(a,.5,t),f=l.luminance();return Math.abs(e-f)<Vu||!n--?l:f>e?o(s,l):o(l,a)},i=(r>e?o(new m([0,0,0]),this):o(this,new m([255,255,255]))).rgb();return new m([...i,this._rgb[3]])}return Gu(...this._rgb.slice(0,3))};var Gu=(e,t,r)=>(e=gs(e),t=gs(t),r=gs(r),.2126*e+.7152*t+.0722*r),gs=e=>(e/=255,e<=.03928?e/12.92:Wu((e+.055)/1.055,2.4));var q={};var Mt=(e,t,r=.5,...n)=>{let o=n[0]||"lrgb";if(!q[o]&&!n.length&&(o=Object.keys(q)[0]),!q[o])throw new Error(`interpolation mode ${o} is not defined`);return x(e)!=="object"&&(e=new m(e)),x(t)!=="object"&&(t=new m(t)),q[o](e,t,r).alpha(e.alpha()+r*(t.alpha()-e.alpha()))};m.prototype.mix=m.prototype.interpolate=function(e,t=.5,...r){return Mt(this,e,t,...r)};m.prototype.premultiply=function(e=!1){let t=this._rgb,r=t[3];return e?(this._rgb=[t[0]*r,t[1]*r,t[2]*r,r],this):new m([t[0]*r,t[1]*r,t[2]*r,r],"rgb")};var{sin:ju,cos:Uu}=Math,zu=(...e)=>{let[t,r,n]=w(e,"lch");return isNaN(n)&&(n=0),n=n*fl,[t,Uu(n)*r,ju(n)*r]},ei=zu;var Zu=(...e)=>{e=w(e,"lch");let[t,r,n]=e,[o,i,s]=ei(t,r,n),[a,l,f]=dn(o,i,s);return[a,l,f,e.length>3?e[3]:1]},hn=Zu;var qu=(...e)=>{let t=Qo(w(e,"hcl"));return hn(...t)},dl=qu;var{sqrt:Qu,atan2:Xu,round:Ku}=Math,Ju=(...e)=>{let[t,r,n]=w(e,"lab"),o=Qu(r*r+n*n),i=(Xu(n,r)*cl+360)%360;return Ku(o*1e4)===0&&(i=Number.NaN),[t,o,i]},ti=Ju;var ep=(...e)=>{let[t,r,n,...o]=w(e,"rgb"),[i,s,a]=mn(t,r,n),[l,f,d]=ti(i,s,a);return[l,f,d,...o.length>0&&o[0]<1?[o[0]]:[]]},lo=ep;m.prototype.lch=function(){return lo(this._rgb)};m.prototype.hcl=function(){return Qo(lo(this._rgb))};var tp=(...e)=>new m(...e,"lch"),rp=(...e)=>new m(...e,"hcl");Object.assign(P,{lch:tp,hcl:rp});C.format.lch=hn;C.format.hcl=dl;["lch","hcl"].forEach(e=>C.autodetect.push({p:2,test:(...t)=>{if(t=w(t,e),x(t)==="array"&&t.length===3)return e}}));m.prototype.saturate=function(e=1){let t=this,r=t.lch();return r[1]+=Lt.Kn*e,r[1]<0&&(r[1]=0),new m(r,"lch").alpha(t.alpha(),!0)};m.prototype.desaturate=function(e=1){return this.saturate(-e)};m.prototype.set=function(e,t,r=!1){let[n,o]=e.split("."),i=this[n]();if(o){let s=n.indexOf(o)-(n.substr(0,2)==="ok"?2:0);if(s>-1){if(x(t)=="string")switch(t.charAt(0)){case"+":i[s]+=+t;break;case"-":i[s]+=+t;break;case"*":i[s]*=+t.substr(1);break;case"/":i[s]/=+t.substr(1);break;default:i[s]=+t}else if(x(t)==="number")i[s]=t;else throw new Error("unsupported value for Color.set");let a=new m(i,n);return r?(this._rgb=a._rgb,this):a}throw new Error(`unknown channel ${o} in mode ${n}`)}else return i};m.prototype.tint=function(e=.5,...t){return Mt(this,"white",e,...t)};m.prototype.shade=function(e=.5,...t){return Mt(this,"black",e,...t)};var np=(e,t,r)=>{let n=e._rgb,o=t._rgb;return new m(n[0]+r*(o[0]-n[0]),n[1]+r*(o[1]-n[1]),n[2]+r*(o[2]-n[2]),"rgb")};q.rgb=np;var{sqrt:vs,pow:_n}=Math,op=(e,t,r)=>{let[n,o,i]=e._rgb,[s,a,l]=t._rgb;return new m(vs(_n(n,2)*(1-r)+_n(s,2)*r),vs(_n(o,2)*(1-r)+_n(a,2)*r),vs(_n(i,2)*(1-r)+_n(l,2)*r),"rgb")};q.lrgb=op;var ip=(e,t,r)=>{let n=e.lab(),o=t.lab();return new m(n[0]+r*(o[0]-n[0]),n[1]+r*(o[1]-n[1]),n[2]+r*(o[2]-n[2]),"lab")};q.lab=ip;var pt=(e,t,r,n)=>{let o,i;n==="hsl"?(o=e.hsl(),i=t.hsl()):n==="hsv"?(o=e.hsv(),i=t.hsv()):n==="hcg"?(o=e.hcg(),i=t.hcg()):n==="hsi"?(o=e.hsi(),i=t.hsi()):n==="lch"||n==="hcl"?(n="hcl",o=e.hcl(),i=t.hcl()):n==="oklch"&&(o=e.oklch().reverse(),i=t.oklch().reverse());let s,a,l,f,d,u;(n.substr(0,1)==="h"||n==="oklch")&&([s,l,d]=o,[a,f,u]=i);let c,p,g,A;return!isNaN(s)&&!isNaN(a)?(a>s&&a-s>180?A=a-(s+360):a<s&&s-a>180?A=a+360-s:A=a-s,p=s+r*A):isNaN(s)?isNaN(a)?p=Number.NaN:(p=a,(d==1||d==0)&&n!="hsv"&&(c=f)):(p=s,(u==1||u==0)&&n!="hsv"&&(c=l)),c===void 0&&(c=l+r*(f-l)),g=d+r*(u-d),n==="oklch"?new m([g,c,p],n):new m([p,c,g],n)};var ml=(e,t,r)=>pt(e,t,r,"lch");q.lch=ml;q.hcl=ml;var sp=e=>{if(x(e)=="number"&&e>=0&&e<=16777215){let t=e>>16,r=e>>8&255,n=e&255;return[t,r,n,1]}throw new Error("unknown num color: "+e)},hl=sp;var ap=(...e)=>{let[t,r,n]=w(e,"rgb");return(t<<16)+(r<<8)+n},_l=ap;m.prototype.num=function(){return _l(this._rgb)};var lp=(...e)=>new m(...e,"num");Object.assign(P,{num:lp});C.format.num=hl;C.autodetect.push({p:5,test:(...e)=>{if(e.length===1&&x(e[0])==="number"&&e[0]>=0&&e[0]<=16777215)return"num"}});var fp=(e,t,r)=>{let n=e.num(),o=t.num();return new m(n+r*(o-n),"num")};q.num=fp;var{floor:cp}=Math,up=(...e)=>{e=w(e,"hcg");let[t,r,n]=e,o,i,s;n=n*255;let a=r*255;if(r===0)o=i=s=n;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;let l=cp(t),f=t-l,d=n*(1-r),u=d+a*(1-f),c=d+a*f,p=d+a;switch(l){case 0:[o,i,s]=[p,c,d];break;case 1:[o,i,s]=[u,p,d];break;case 2:[o,i,s]=[d,p,c];break;case 3:[o,i,s]=[d,u,p];break;case 4:[o,i,s]=[c,d,p];break;case 5:[o,i,s]=[p,d,u];break}}return[o,i,s,e.length>3?e[3]:1]},gl=up;var pp=(...e)=>{let[t,r,n]=w(e,"rgb"),o=zo(t,r,n),i=Zo(t,r,n),s=i-o,a=s*100/255,l=o/(255-s)*100,f;return s===0?f=Number.NaN:(t===i&&(f=(r-n)/s),r===i&&(f=2+(n-t)/s),n===i&&(f=4+(t-r)/s),f*=60,f<0&&(f+=360)),[f,a,l]},vl=pp;m.prototype.hcg=function(){return vl(this._rgb)};var dp=(...e)=>new m(...e,"hcg");P.hcg=dp;C.format.hcg=gl;C.autodetect.push({p:1,test:(...e)=>{if(e=w(e,"hcg"),x(e)==="array"&&e.length===3)return"hcg"}});var mp=(e,t,r)=>pt(e,t,r,"hcg");q.hcg=mp;var{cos:gn}=Math,hp=(...e)=>{e=w(e,"hsi");let[t,r,n]=e,o,i,s;return isNaN(t)&&(t=0),isNaN(r)&&(r=0),t>360&&(t-=360),t<0&&(t+=360),t/=360,t<1/3?(s=(1-r)/3,o=(1+r*gn(ct*t)/gn(qo-ct*t))/3,i=1-(s+o)):t<2/3?(t-=1/3,o=(1-r)/3,i=(1+r*gn(ct*t)/gn(qo-ct*t))/3,s=1-(o+i)):(t-=2/3,i=(1-r)/3,s=(1+r*gn(ct*t)/gn(qo-ct*t))/3,o=1-(i+s)),o=ft(n*o*3),i=ft(n*i*3),s=ft(n*s*3),[o*255,i*255,s*255,e.length>3?e[3]:1]},bl=hp;var{min:_p,sqrt:gp,acos:vp}=Math,bp=(...e)=>{let[t,r,n]=w(e,"rgb");t/=255,r/=255,n/=255;let o,i=_p(t,r,n),s=(t+r+n)/3,a=s>0?1-i/s:0;return a===0?o=NaN:(o=(t-r+(t-n))/2,o/=gp((t-r)*(t-r)+(t-n)*(r-n)),o=vp(o),n>r&&(o=ct-o),o/=ct),[o*360,a,s]},Al=bp;m.prototype.hsi=function(){return Al(this._rgb)};var Ap=(...e)=>new m(...e,"hsi");P.hsi=Ap;C.format.hsi=bl;C.autodetect.push({p:2,test:(...e)=>{if(e=w(e,"hsi"),x(e)==="array"&&e.length===3)return"hsi"}});var yp=(e,t,r)=>pt(e,t,r,"hsi");q.hsi=yp;var wp=(...e)=>{e=w(e,"hsl");let[t,r,n]=e,o,i,s;if(r===0)o=i=s=n*255;else{let a=[0,0,0],l=[0,0,0],f=n<.5?n*(1+r):n+r-n*r,d=2*n-f,u=t/360;a[0]=u+1/3,a[1]=u,a[2]=u-1/3;for(let c=0;c<3;c++)a[c]<0&&(a[c]+=1),a[c]>1&&(a[c]-=1),6*a[c]<1?l[c]=d+(f-d)*6*a[c]:2*a[c]<1?l[c]=f:3*a[c]<2?l[c]=d+(f-d)*(2/3-a[c])*6:l[c]=d;[o,i,s]=[l[0]*255,l[1]*255,l[2]*255]}return e.length>3?[o,i,s,e[3]]:[o,i,s,1]},fo=wp;var xp=(...e)=>{e=w(e,"rgba");let[t,r,n]=e;t/=255,r/=255,n/=255;let o=zo(t,r,n),i=Zo(t,r,n),s=(i+o)/2,a,l;return i===o?(a=0,l=Number.NaN):a=s<.5?(i-o)/(i+o):(i-o)/(2-i-o),t==i?l=(r-n)/(i-o):r==i?l=2+(n-t)/(i-o):n==i&&(l=4+(t-r)/(i-o)),l*=60,l<0&&(l+=360),e.length>3&&e[3]!==void 0?[l,a,s,e[3]]:[l,a,s]},ri=xp;m.prototype.hsl=function(){return ri(this._rgb)};var Ep=(...e)=>new m(...e,"hsl");P.hsl=Ep;C.format.hsl=fo;C.autodetect.push({p:2,test:(...e)=>{if(e=w(e,"hsl"),x(e)==="array"&&e.length===3)return"hsl"}});var Cp=(e,t,r)=>pt(e,t,r,"hsl");q.hsl=Cp;var{floor:kp}=Math,Tp=(...e)=>{e=w(e,"hsv");let[t,r,n]=e,o,i,s;if(n*=255,r===0)o=i=s=n;else{t===360&&(t=0),t>360&&(t-=360),t<0&&(t+=360),t/=60;let a=kp(t),l=t-a,f=n*(1-r),d=n*(1-r*l),u=n*(1-r*(1-l));switch(a){case 0:[o,i,s]=[n,u,f];break;case 1:[o,i,s]=[d,n,f];break;case 2:[o,i,s]=[f,n,u];break;case 3:[o,i,s]=[f,d,n];break;case 4:[o,i,s]=[u,f,n];break;case 5:[o,i,s]=[n,f,d];break}}return[o,i,s,e.length>3?e[3]:1]},yl=Tp;var{min:Np,max:Pp}=Math,Ip=(...e)=>{e=w(e,"rgb");let[t,r,n]=e,o=Np(t,r,n),i=Pp(t,r,n),s=i-o,a,l,f;return f=i/255,i===0?(a=Number.NaN,l=0):(l=s/i,t===i&&(a=(r-n)/s),r===i&&(a=2+(n-t)/s),n===i&&(a=4+(t-r)/s),a*=60,a<0&&(a+=360)),[a,l,f]},wl=Ip;m.prototype.hsv=function(){return wl(this._rgb)};var $p=(...e)=>new m(...e,"hsv");P.hsv=$p;C.format.hsv=yl;C.autodetect.push({p:2,test:(...e)=>{if(e=w(e,"hsv"),x(e)==="array"&&e.length===3)return"hsv"}});var Sp=(e,t,r)=>pt(e,t,r,"hsv");q.hsv=Sp;function Yr(e,t){let r=e.length;Array.isArray(e[0])||(e=[e]),Array.isArray(t[0])||(t=t.map(s=>[s]));let n=t[0].length,o=t[0].map((s,a)=>t.map(l=>l[a])),i=e.map(s=>o.map(a=>Array.isArray(s)?s.reduce((l,f,d)=>l+f*(a[d]||0),0):a.reduce((l,f)=>l+f*s,0)));return r===1&&(i=i[0]),n===1?i.map(s=>s[0]):i}var Dp=(...e)=>{e=w(e,"lab");let[t,r,n,...o]=e,[i,s,a]=Rp([t,r,n]),[l,f,d]=ms(i,s,a);return[l,f,d,...o.length>0&&o[0]<1?[o[0]]:[]]};function Rp(e){var t=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],r=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]],n=Yr(r,e);return Yr(t,n.map(o=>o**3))}var vn=Dp;var Lp=(...e)=>{let[t,r,n,...o]=w(e,"rgb"),i=_s(t,r,n);return[...Mp(i),...o.length>0&&o[0]<1?[o[0]]:[]]};function Mp(e){let t=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],r=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],n=Yr(t,e);return Yr(r,n.map(o=>Math.cbrt(o)))}var bn=Lp;m.prototype.oklab=function(){return bn(this._rgb)};var Bp=(...e)=>new m(...e,"oklab");Object.assign(P,{oklab:Bp});C.format.oklab=vn;C.autodetect.push({p:2,test:(...e)=>{if(e=w(e,"oklab"),x(e)==="array"&&e.length===3)return"oklab"}});var Op=(e,t,r)=>{let n=e.oklab(),o=t.oklab();return new m(n[0]+r*(o[0]-n[0]),n[1]+r*(o[1]-n[1]),n[2]+r*(o[2]-n[2]),"oklab")};q.oklab=Op;var Fp=(e,t,r)=>pt(e,t,r,"oklch");q.oklch=Fp;var{pow:bs,sqrt:As,PI:ys,cos:xl,sin:El,atan2:Yp}=Math,Cl=(e,t="lrgb",r=null)=>{let n=e.length;r||(r=Array.from(new Array(n)).map(()=>1));let o=n/r.reduce(function(u,c){return u+c});if(r.forEach((u,c)=>{r[c]*=o}),e=e.map(u=>new m(u)),t==="lrgb")return Wp(e,r);let i=e.shift(),s=i.get(t),a=[],l=0,f=0;for(let u=0;u<s.length;u++)if(s[u]=(s[u]||0)*r[0],a.push(isNaN(s[u])?0:r[0]),t.charAt(u)==="h"&&!isNaN(s[u])){let c=s[u]/180*ys;l+=xl(c)*r[0],f+=El(c)*r[0]}let d=i.alpha()*r[0];e.forEach((u,c)=>{let p=u.get(t);d+=u.alpha()*r[c+1];for(let g=0;g<s.length;g++)if(!isNaN(p[g]))if(a[g]+=r[c+1],t.charAt(g)==="h"){let A=p[g]/180*ys;l+=xl(A)*r[c+1],f+=El(A)*r[c+1]}else s[g]+=p[g]*r[c+1]});for(let u=0;u<s.length;u++)if(t.charAt(u)==="h"){let c=Yp(f/a[u],l/a[u])/ys*180;for(;c<0;)c+=360;for(;c>=360;)c-=360;s[u]=c}else s[u]=s[u]/a[u];return d/=n,new m(s,t).alpha(d>.99999?1:d,!0)},Wp=(e,t)=>{let r=e.length,n=[0,0,0,0];for(let o=0;o<e.length;o++){let i=e[o],s=t[o]/r,a=i._rgb;n[0]+=bs(a[0],2)*s,n[1]+=bs(a[1],2)*s,n[2]+=bs(a[2],2)*s,n[3]+=a[3]*s}return n[0]=As(n[0]),n[1]=As(n[1]),n[2]=As(n[2]),n[3]>.9999999&&(n[3]=1),new m(Fr(n))};var{pow:Vp}=Math;function Wr(e){let t="rgb",r=P("#ccc"),n=0,o=[0,1],i=[],s=[0,0],a=!1,l=[],f=!1,d=0,u=1,c=!1,p={},g=!0,A=1,_=function(y){if(y=y||["#fff","#000"],y&&x(y)==="string"&&P.brewer&&P.brewer[y.toLowerCase()]&&(y=P.brewer[y.toLowerCase()]),x(y)==="array"){y.length===1&&(y=[y[0],y[0]]),y=y.slice(0);for(let E=0;E<y.length;E++)y[E]=P(y[E]);i.length=0;for(let E=0;E<y.length;E++)i.push(E/(y.length-1))}return j(),l=y},v=function(y){if(a!=null){let E=a.length-1,R=0;for(;R<E&&y>=a[R];)R++;return R-1}return 0},B=y=>y,D=y=>y,N=function(y,E){let R,I;if(E==null&&(E=!1),isNaN(y)||y===null)return r;E?I=y:a&&a.length>2?I=v(y)/(a.length-2):u!==d?I=(y-d)/(u-d):I=1,I=D(I),E||(I=B(I)),A!==1&&(I=Vp(I,A)),I=s[0]+I*(1-s[0]-s[1]),I=ft(I,0,1);let O=Math.floor(I*1e4);if(g&&p[O])R=p[O];else{if(x(l)==="array")for(let F=0;F<i.length;F++){let U=i[F];if(I<=U){R=l[F];break}if(I>=U&&F===i.length-1){R=l[F];break}if(I>U&&I<i[F+1]){I=(I-U)/(i[F+1]-U),R=P.interpolate(l[F],l[F+1],I,t);break}}else x(l)==="function"&&(R=l(I));g&&(p[O]=R)}return R};var j=()=>p={};_(e);let M=function(y){let E=P(N(y));return f&&E[f]?E[f]():E};return M.classes=function(y){if(y!=null){if(x(y)==="array")a=y,o=[y[0],y[y.length-1]];else{let E=P.analyze(o);y===0?a=[E.min,E.max]:a=P.limits(E,"e",y)}return M}return a},M.domain=function(y){if(!arguments.length)return o;d=y[0],u=y[y.length-1],i=[];let E=l.length;if(y.length===E&&d!==u)for(let R of Array.from(y))i.push((R-d)/(u-d));else{for(let R=0;R<E;R++)i.push(R/(E-1));if(y.length>2){let R=y.map((O,F)=>F/(y.length-1)),I=y.map(O=>(O-d)/(u-d));I.every((O,F)=>R[F]===O)||(D=O=>{if(O<=0||O>=1)return O;let F=0;for(;O>=I[F+1];)F++;let U=(O-I[F])/(I[F+1]-I[F]);return R[F]+U*(R[F+1]-R[F])})}}return o=[d,u],M},M.mode=function(y){return arguments.length?(t=y,j(),M):t},M.range=function(y,E){return _(y,E),M},M.out=function(y){return f=y,M},M.spread=function(y){return arguments.length?(n=y,M):n},M.correctLightness=function(y){return y==null&&(y=!0),c=y,j(),c?B=function(E){let R=N(0,!0).lab()[0],I=N(1,!0).lab()[0],O=R>I,F=N(E,!0).lab()[0],U=R+(I-R)*E,ue=F-U,Rt=0,or=1,K=20;for(;Math.abs(ue)>.01&&K-- >0;)(function(){return O&&(ue*=-1),ue<0?(Rt=E,E+=(or-E)*.5):(or=E,E+=(Rt-E)*.5),F=N(E,!0).lab()[0],ue=F-U})();return E}:B=E=>E,M},M.padding=function(y){return y!=null?(x(y)==="number"&&(y=[y,y]),s=y,M):s},M.colors=function(y,E){arguments.length<2&&(E="hex");let R=[];if(arguments.length===0)R=l.slice(0);else if(y===1)R=[M(.5)];else if(y>1){let I=o[0],O=o[1]-I;R=Hp(0,y,!1).map(F=>M(I+F/(y-1)*O))}else{e=[];let I=[];if(a&&a.length>2)for(let O=1,F=a.length,U=1<=F;U?O<F:O>F;U?O++:O--)I.push((a[O-1]+a[O])*.5);else I=o;R=I.map(O=>M(O))}return P[E]&&(R=R.map(I=>I[E]())),R},M.cache=function(y){return y!=null?(g=y,M):g},M.gamma=function(y){return y!=null?(A=y,M):A},M.nodata=function(y){return y!=null?(r=P(y),M):r},M}function Hp(e,t,r){let n=[],o=e<t,i=r?o?t+1:t-1:t;for(let s=e;o?s<i:s>i;o?s++:s--)n.push(s);return n}var Gp=function(e){let t=[1,1];for(let r=1;r<e;r++){let n=[1];for(let o=1;o<=t.length;o++)n[o]=(t[o]||0)+t[o-1];t=n}return t},jp=function(e){let t,r,n,o;if(e=e.map(i=>new m(i)),e.length===2)[r,n]=e.map(i=>i.lab()),t=function(i){let s=[0,1,2].map(a=>r[a]+i*(n[a]-r[a]));return new m(s,"lab")};else if(e.length===3)[r,n,o]=e.map(i=>i.lab()),t=function(i){let s=[0,1,2].map(a=>(1-i)*(1-i)*r[a]+2*(1-i)*i*n[a]+i*i*o[a]);return new m(s,"lab")};else if(e.length===4){let i;[r,n,o,i]=e.map(s=>s.lab()),t=function(s){let a=[0,1,2].map(l=>(1-s)*(1-s)*(1-s)*r[l]+3*(1-s)*(1-s)*s*n[l]+3*(1-s)*s*s*o[l]+s*s*s*i[l]);return new m(a,"lab")}}else if(e.length>=5){let i,s,a;i=e.map(l=>l.lab()),a=e.length-1,s=Gp(a),t=function(l){let f=1-l,d=[0,1,2].map(u=>i.reduce((c,p,g)=>c+s[g]*f**(a-g)*l**g*p[u],0));return new m(d,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return t},kl=e=>{let t=jp(e);return t.scale=()=>Wr(t),t};var{round:Tl}=Math;m.prototype.rgb=function(e=!0){return e===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Tl)};m.prototype.rgba=function(e=!0){return this._rgb.slice(0,4).map((t,r)=>r<3?e===!1?t:Tl(t):t)};var Up=(...e)=>new m(...e,"rgb");Object.assign(P,{rgb:Up});C.format.rgb=(...e)=>{let t=w(e,"rgba");return t[3]===void 0&&(t[3]=1),t};C.autodetect.push({p:3,test:(...e)=>{if(e=w(e,"rgba"),x(e)==="array"&&(e.length===3||e.length===4&&x(e[3])=="number"&&e[3]>=0&&e[3]<=1))return"rgb"}});var Et=(e,t,r)=>{if(!Et[r])throw new Error("unknown blend mode "+r);return Et[r](e,t)},Er=e=>(t,r)=>{let n=P(r).rgb(),o=P(t).rgb();return P.rgb(e(n,o))},Cr=e=>(t,r)=>{let n=[];return n[0]=e(t[0],r[0]),n[1]=e(t[1],r[1]),n[2]=e(t[2],r[2]),n},zp=e=>e,Zp=(e,t)=>e*t/255,qp=(e,t)=>e>t?t:e,Qp=(e,t)=>e>t?e:t,Xp=(e,t)=>255*(1-(1-e/255)*(1-t/255)),Kp=(e,t)=>t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255)),Jp=(e,t)=>255*(1-(1-t/255)/(e/255)),ed=(e,t)=>e===255?255:(e=255*(t/255)/(1-e/255),e>255?255:e);Et.normal=Er(Cr(zp));Et.multiply=Er(Cr(Zp));Et.screen=Er(Cr(Xp));Et.overlay=Er(Cr(Kp));Et.darken=Er(Cr(qp));Et.lighten=Er(Cr(Qp));Et.dodge=Er(Cr(ed));Et.burn=Er(Cr(Jp));var Nl=Et;var{pow:td,sin:rd,cos:nd}=Math;function Pl(e=300,t=-1.5,r=1,n=1,o=[0,1]){let i=0,s;x(o)==="array"?s=o[1]-o[0]:(s=0,o=[o,o]);let a=function(l){let f=ct*((e+120)/360+t*l),d=td(o[0]+s*l,n),c=(i!==0?r[0]+l*i:r)*d*(1-d)/2,p=nd(f),g=rd(f),A=d+c*(-.14861*p+1.78277*g),_=d+c*(-.29227*p-.90649*g),v=d+c*(1.97294*p);return P(Fr([A*255,_*255,v*255,1]))};return a.start=function(l){return l==null?e:(e=l,a)},a.rotations=function(l){return l==null?t:(t=l,a)},a.gamma=function(l){return l==null?n:(n=l,a)},a.hue=function(l){return l==null?r:(r=l,x(r)==="array"?(i=r[1]-r[0],i===0&&(r=r[1])):i=0,a)},a.lightness=function(l){return l==null?o:(x(l)==="array"?(o=l,s=l[1]-l[0]):(o=[l,l],s=0),a)},a.scale=()=>P.scale(a),a.hue(r),a}var od="0123456789abcdef",{floor:id,random:sd}=Math,Il=()=>{let e="#";for(let t=0;t<6;t++)e+=od.charAt(id(sd()*16));return new m(e,"hex")};var{log:$l,pow:ad,floor:ld,abs:fd}=Math;function ws(e,t=null){let r={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return x(e)==="object"&&(e=Object.values(e)),e.forEach(n=>{t&&x(n)==="object"&&(n=n[t]),n!=null&&!isNaN(n)&&(r.values.push(n),r.sum+=n,n<r.min&&(r.min=n),n>r.max&&(r.max=n),r.count+=1)}),r.domain=[r.min,r.max],r.limits=(n,o)=>xs(r,n,o),r}function xs(e,t="equal",r=7){x(e)=="array"&&(e=ws(e));let{min:n,max:o}=e,i=e.values.sort((a,l)=>a-l);if(r===1)return[n,o];let s=[];if(t.substr(0,1)==="c"&&(s.push(n),s.push(o)),t.substr(0,1)==="e"){s.push(n);for(let a=1;a<r;a++)s.push(n+a/r*(o-n));s.push(o)}else if(t.substr(0,1)==="l"){if(n<=0)throw new Error("Logarithmic scales are only possible for values > 0");let a=Math.LOG10E*$l(n),l=Math.LOG10E*$l(o);s.push(n);for(let f=1;f<r;f++)s.push(ad(10,a+f/r*(l-a)));s.push(o)}else if(t.substr(0,1)==="q"){s.push(n);for(let a=1;a<r;a++){let l=(i.length-1)*a/r,f=ld(l);if(f===l)s.push(i[f]);else{let d=l-f;s.push(i[f]*(1-d)+i[f+1]*d)}}s.push(o)}else if(t.substr(0,1)==="k"){let a,l=i.length,f=new Array(l),d=new Array(r),u=!0,c=0,p=null;p=[],p.push(n);for(let _=1;_<r;_++)p.push(n+_/r*(o-n));for(p.push(o);u;){for(let v=0;v<r;v++)d[v]=0;for(let v=0;v<l;v++){let B=i[v],D=Number.MAX_VALUE,N;for(let j=0;j<r;j++){let M=fd(p[j]-B);M<D&&(D=M,N=j),d[N]++,f[v]=N}}let _=new Array(r);for(let v=0;v<r;v++)_[v]=null;for(let v=0;v<l;v++)a=f[v],_[a]===null?_[a]=i[v]:_[a]+=i[v];for(let v=0;v<r;v++)_[v]*=1/d[v];u=!1;for(let v=0;v<r;v++)if(_[v]!==p[v]){u=!0;break}p=_,c++,c>200&&(u=!1)}let g={};for(let _=0;_<r;_++)g[_]=[];for(let _=0;_<l;_++)a=f[_],g[a].push(i[_]);let A=[];for(let _=0;_<r;_++)A.push(g[_][0]),A.push(g[_][g[_].length-1]);A=A.sort((_,v)=>_-v),s.push(A[0]);for(let _=1;_<A.length;_+=2){let v=A[_];!isNaN(v)&&s.indexOf(v)===-1&&s.push(v)}}return s}var Sl=(e,t)=>{e=new m(e),t=new m(t);let r=e.luminance(),n=t.luminance();return r>n?(r+.05)/(n+.05):(n+.05)/(r+.05)};var Dl=.027,cd=5e-4,ud=.1,Rl=1.14,ni=.022,Ll=1.414,Bl=(e,t)=>{e=new m(e),t=new m(t),e.alpha()<1&&(e=Mt(t,e,e.alpha(),"rgb"));let r=Ml(...e.rgb()),n=Ml(...t.rgb()),o=r>=ni?r:r+Math.pow(ni-r,Ll),i=n>=ni?n:n+Math.pow(ni-n,Ll),s=Math.pow(i,.56)-Math.pow(o,.57),a=Math.pow(i,.65)-Math.pow(o,.62),l=Math.abs(i-o)<cd?0:o<i?s*Rl:a*Rl;return(Math.abs(l)<ud?0:l>0?l-Dl:l+Dl)*100};function Ml(e,t,r){return .2126729*Math.pow(e/255,2.4)+.7151522*Math.pow(t/255,2.4)+.072175*Math.pow(r/255,2.4)}var{sqrt:lr,pow:pe,min:pd,max:dd,atan2:Ol,abs:Fl,cos:oi,sin:Yl,exp:md,PI:Wl}=Math;function Vl(e,t,r=1,n=1,o=1){var i=function(sr){return 360*sr/(2*Wl)},s=function(sr){return 2*Wl*sr/360};e=new m(e),t=new m(t);let[a,l,f]=Array.from(e.lab()),[d,u,c]=Array.from(t.lab()),p=(a+d)/2,g=lr(pe(l,2)+pe(f,2)),A=lr(pe(u,2)+pe(c,2)),_=(g+A)/2,v=.5*(1-lr(pe(_,7)/(pe(_,7)+pe(25,7)))),B=l*(1+v),D=u*(1+v),N=lr(pe(B,2)+pe(f,2)),j=lr(pe(D,2)+pe(c,2)),M=(N+j)/2,y=i(Ol(f,B)),E=i(Ol(c,D)),R=y>=0?y:y+360,I=E>=0?E:E+360,O=Fl(R-I)>180?(R+I+360)/2:(R+I)/2,F=1-.17*oi(s(O-30))+.24*oi(s(2*O))+.32*oi(s(3*O+6))-.2*oi(s(4*O-63)),U=I-R;U=Fl(U)<=180?U:I<=R?U+360:U-360,U=2*lr(N*j)*Yl(s(U)/2);let ue=d-a,Rt=j-N,or=1+.015*pe(p-50,2)/lr(20+pe(p-50,2)),K=1+.045*M,oe=1+.015*M*F,We=30*md(-pe((O-275)/25,2)),ir=-(2*lr(pe(M,7)/(pe(M,7)+pe(25,7))))*Yl(2*s(We)),Br=lr(pe(ue/(r*or),2)+pe(Rt/(n*K),2)+pe(U/(o*oe),2)+ir*(Rt/(n*K))*(U/(o*oe)));return dd(0,pd(100,Br))}function Hl(e,t,r="lab"){e=new m(e),t=new m(t);let n=e.get(r),o=t.get(r),i=0;for(let s in n){let a=(n[s]||0)-(o[s]||0);i+=a*a}return Math.sqrt(i)}var Gl=(...e)=>{try{return new m(...e),!0}catch{return!1}};var jl={cool(){return Wr([P.hsl(180,1,.9),P.hsl(250,.7,.4)])},hot(){return Wr(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")}};var Es={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},zl=Object.keys(Es),Ul=new Map(zl.map(e=>[e.toLowerCase(),e])),hd=typeof Proxy=="function"?new Proxy(Es,{get(e,t){let r=t.toLowerCase();if(Ul.has(r))return e[Ul.get(r)]},getOwnPropertyNames(){return Object.getOwnPropertyNames(zl)}}):Es,Zl=hd;var _d=(...e)=>{e=w(e,"cmyk");let[t,r,n,o]=e,i=e.length>4?e[4]:1;return o===1?[0,0,0,i]:[t>=1?0:255*(1-t)*(1-o),r>=1?0:255*(1-r)*(1-o),n>=1?0:255*(1-n)*(1-o),i]},ql=_d;var{max:Ql}=Math,gd=(...e)=>{let[t,r,n]=w(e,"rgb");t=t/255,r=r/255,n=n/255;let o=1-Ql(t,Ql(r,n)),i=o<1?1/(1-o):0,s=(1-t-o)*i,a=(1-r-o)*i,l=(1-n-o)*i;return[s,a,l,o]},Xl=gd;m.prototype.cmyk=function(){return Xl(this._rgb)};var vd=(...e)=>new m(...e,"cmyk");Object.assign(P,{cmyk:vd});C.format.cmyk=ql;C.autodetect.push({p:2,test:(...e)=>{if(e=w(e,"cmyk"),x(e)==="array"&&e.length===4)return"cmyk"}});var bd=(...e)=>{let t=w(e,"hsla"),r=Qe(e)||"lsa";return t[0]=ke(t[0]||0)+"deg",t[1]=ke(t[1]*100)+"%",t[2]=ke(t[2]*100)+"%",r==="hsla"||t.length>3&&t[3]<1?(t[3]="/ "+(t.length>3?t[3]:1),r="hsla"):t.length=3,`${r.substr(0,3)}(${t.join(" ")})`},Kl=bd;var Ad=(...e)=>{let t=w(e,"lab"),r=Qe(e)||"lab";return t[0]=ke(t[0])+"%",t[1]=ke(t[1]),t[2]=ke(t[2]),r==="laba"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lab(${t.join(" ")})`},Jl=Ad;var yd=(...e)=>{let t=w(e,"lch"),r=Qe(e)||"lab";return t[0]=ke(t[0])+"%",t[1]=ke(t[1]),t[2]=isNaN(t[2])?"none":ke(t[2])+"deg",r==="lcha"||t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`lch(${t.join(" ")})`},ef=yd;var wd=(...e)=>{let t=w(e,"lab");return t[0]=ke(t[0]*100)+"%",t[1]=so(t[1]),t[2]=so(t[2]),t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklab(${t.join(" ")})`},tf=wd;var xd=(...e)=>{let[t,r,n,...o]=w(e,"rgb"),[i,s,a]=bn(t,r,n),[l,f,d]=ti(i,s,a);return[l,f,d,...o.length>0&&o[0]<1?[o[0]]:[]]},ii=xd;var Ed=(...e)=>{let t=w(e,"lch");return t[0]=ke(t[0]*100)+"%",t[1]=so(t[1]),t[2]=isNaN(t[2])?"none":ke(t[2])+"deg",t.length>3&&t[3]<1?t[3]="/ "+(t.length>3?t[3]:1):t.length=3,`oklch(${t.join(" ")})`},rf=Ed;var{round:Cs}=Math,Cd=(...e)=>{let t=w(e,"rgba"),r=Qe(e)||"rgb";if(r.substr(0,3)==="hsl")return Kl(ri(t),r);if(r.substr(0,3)==="lab"){let n=xr();ut("d50");let o=Jl(mn(t),r);return ut(n),o}if(r.substr(0,3)==="lch"){let n=xr();ut("d50");let o=ef(lo(t),r);return ut(n),o}return r.substr(0,5)==="oklab"?tf(bn(t)):r.substr(0,5)==="oklch"?rf(ii(t)):(t[0]=Cs(t[0]),t[1]=Cs(t[1]),t[2]=Cs(t[2]),(r==="rgba"||t.length>3&&t[3]<1)&&(t[3]="/ "+(t.length>3?t[3]:1),r="rgba"),`${r.substr(0,3)}(${t.slice(0,r==="rgb"?3:4).join(" ")})`)},nf=Cd;var kd=(...e)=>{e=w(e,"lch");let[t,r,n,...o]=e,[i,s,a]=ei(t,r,n),[l,f,d]=vn(i,s,a);return[l,f,d,...o.length>0&&o[0]<1?[o[0]]:[]]},si=kd;var fr=/((?:-?\d+)|(?:-?\d+(?:\.\d+)?)%|none)/.source,Ct=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%?)|none)/.source,ai=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)%)|none)/.source,dt=/\s*/.source,yn=/\s+/.source,ks=/\s*,\s*/.source,li=/((?:-?(?:\d+(?:\.\d*)?|\.\d+)(?:deg)?)|none)/.source,wn=/\s*(?:\/\s*((?:[01]|[01]?\.\d+)|\d+(?:\.\d+)?%))?/.source,of=new RegExp("^rgba?\\("+dt+[fr,fr,fr].join(yn)+wn+"\\)$"),sf=new RegExp("^rgb\\("+dt+[fr,fr,fr].join(ks)+dt+"\\)$"),af=new RegExp("^rgba\\("+dt+[fr,fr,fr,Ct].join(ks)+dt+"\\)$"),lf=new RegExp("^hsla?\\("+dt+[li,ai,ai].join(yn)+wn+"\\)$"),ff=new RegExp("^hsl?\\("+dt+[li,ai,ai].join(ks)+dt+"\\)$"),cf=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,uf=new RegExp("^lab\\("+dt+[Ct,Ct,Ct].join(yn)+wn+"\\)$"),pf=new RegExp("^lch\\("+dt+[Ct,Ct,li].join(yn)+wn+"\\)$"),df=new RegExp("^oklab\\("+dt+[Ct,Ct,Ct].join(yn)+wn+"\\)$"),mf=new RegExp("^oklch\\("+dt+[Ct,Ct,li].join(yn)+wn+"\\)$"),{round:hf}=Math,An=e=>e.map((t,r)=>r<=2?ft(hf(t),0,255):t),de=(e,t=0,r=100,n=!1)=>(typeof e=="string"&&e.endsWith("%")&&(e=parseFloat(e.substring(0,e.length-1))/100,n?e=t+(e+1)*.5*(r-t):e=t+e*(r-t)),+e),Re=(e,t)=>e==="none"?t:e,_f=e=>{if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];let t;if(C.format.named)try{return C.format.named(e)}catch{}if((t=e.match(of))||(t=e.match(sf))){let r=t.slice(1,4);for(let o=0;o<3;o++)r[o]=+de(Re(r[o],0),0,255);r=An(r);let n=t[4]!==void 0?+de(t[4],0,1):1;return r[3]=n,r}if(t=e.match(af)){let r=t.slice(1,5);for(let n=0;n<4;n++)r[n]=+de(r[n],0,255);return r}if((t=e.match(lf))||(t=e.match(ff))){let r=t.slice(1,4);r[0]=+Re(r[0].replace("deg",""),0),r[1]=+de(Re(r[1],0),0,100)*.01,r[2]=+de(Re(r[2],0),0,100)*.01;let n=An(fo(r)),o=t[4]!==void 0?+de(t[4],0,1):1;return n[3]=o,n}if(t=e.match(cf)){let r=t.slice(1,4);r[1]*=.01,r[2]*=.01;let n=fo(r);for(let o=0;o<3;o++)n[o]=hf(n[o]);return n[3]=+t[4],n}if(t=e.match(uf)){let r=t.slice(1,4);r[0]=de(Re(r[0],0),0,100),r[1]=de(Re(r[1],0),-125,125,!0),r[2]=de(Re(r[2],0),-125,125,!0);let n=xr();ut("d50");let o=An(dn(r));ut(n);let i=t[4]!==void 0?+de(t[4],0,1):1;return o[3]=i,o}if(t=e.match(pf)){let r=t.slice(1,4);r[0]=de(r[0],0,100),r[1]=de(Re(r[1],0),0,150,!1),r[2]=+Re(r[2].replace("deg",""),0);let n=xr();ut("d50");let o=An(hn(r));ut(n);let i=t[4]!==void 0?+de(t[4],0,1):1;return o[3]=i,o}if(t=e.match(df)){let r=t.slice(1,4);r[0]=de(Re(r[0],0),0,1),r[1]=de(Re(r[1],0),-.4,.4,!0),r[2]=de(Re(r[2],0),-.4,.4,!0);let n=An(vn(r)),o=t[4]!==void 0?+de(t[4],0,1):1;return n[3]=o,n}if(t=e.match(mf)){let r=t.slice(1,4);r[0]=de(Re(r[0],0),0,1),r[1]=de(Re(r[1],0),0,.4,!1),r[2]=+Re(r[2].replace("deg",""),0);let n=An(si(r)),o=t[4]!==void 0?+de(t[4],0,1):1;return n[3]=o,n}};_f.test=e=>of.test(e)||lf.test(e)||uf.test(e)||pf.test(e)||df.test(e)||mf.test(e)||sf.test(e)||af.test(e)||ff.test(e)||cf.test(e)||e==="transparent";var Ts=_f;m.prototype.css=function(e){return nf(this._rgb,e)};var Td=(...e)=>new m(...e,"css");P.css=Td;C.format.css=Ts;C.autodetect.push({p:5,test:(e,...t)=>{if(!t.length&&x(e)==="string"&&Ts.test(e))return"css"}});C.format.gl=(...e)=>{let t=w(e,"rgba");return t[0]*=255,t[1]*=255,t[2]*=255,t};var Nd=(...e)=>new m(...e,"gl");P.gl=Nd;m.prototype.gl=function(){let e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};m.prototype.hex=function(e){return Jo(this._rgb,e)};var Pd=(...e)=>new m(...e,"hex");P.hex=Pd;C.format.hex=Xo;C.autodetect.push({p:4,test:(e,...t)=>{if(!t.length&&x(e)==="string"&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});var{log:fi}=Math,Id=e=>{let t=e/100,r,n,o;return t<66?(r=255,n=t<6?0:-155.25485562709179-.44596950469579133*(n=t-2)+104.49216199393888*fi(n),o=t<20?0:-254.76935184120902+.8274096064007395*(o=t-10)+115.67994401066147*fi(o)):(r=351.97690566805693+.114206453784165*(r=t-55)-40.25366309332127*fi(r),n=325.4494125711974+.07943456536662342*(n=t-50)-28.0852963507957*fi(n),o=255),[r,n,o,1]},ci=Id;var{round:$d}=Math,Sd=(...e)=>{let t=w(e,"rgb"),r=t[0],n=t[2],o=1e3,i=4e4,s=.4,a;for(;i-o>s;){a=(i+o)*.5;let l=ci(a);l[2]/l[0]>=n/r?i=a:o=a}return $d(a)},gf=Sd;m.prototype.temp=m.prototype.kelvin=m.prototype.temperature=function(){return gf(this._rgb)};var Ns=(...e)=>new m(...e,"temp");Object.assign(P,{temp:Ns,kelvin:Ns,temperature:Ns});C.format.temp=C.format.kelvin=C.format.temperature=ci;m.prototype.oklch=function(){return ii(this._rgb)};var Dd=(...e)=>new m(...e,"oklch");Object.assign(P,{oklch:Dd});C.format.oklch=si;C.autodetect.push({p:2,test:(...e)=>{if(e=w(e,"oklch"),x(e)==="array"&&e.length===3)return"oklch"}});Object.assign(P,{analyze:ws,average:Cl,bezier:kl,blend:Nl,brewer:Zl,Color:m,colors:wr,contrast:Sl,contrastAPCA:Bl,cubehelix:Pl,deltaE:Vl,distance:Hl,input:C,interpolate:Mt,limits:xs,mix:Mt,random:Il,scale:Wr,scales:jl,valid:Gl});var Ps=P;var Uc=require("obsidian");var vf=globalThis.process?.env?.NODE_ENV,b=vf&&!vf.toLowerCase().startsWith("prod");var Bt=Array.isArray,bf=Array.prototype.indexOf,co=Array.from,Is=Object.keys,ye=Object.defineProperty,Ve=Object.getOwnPropertyDescriptor,ui=Object.getOwnPropertyDescriptors,$s=Object.prototype,Af=Array.prototype,Vr=Object.getPrototypeOf,Ss=Object.isExtensible;var He=()=>{};function yf(e){return e()}function xn(e){for(var t=0;t<e.length;t++)e[t]()}function pi(){var e,t,r=new Promise((n,o)=>{e=n,t=o});return{promise:r,resolve:e,reject:t}}var Te=Symbol("$state"),uo=Symbol("legacy props"),wf=Symbol(""),di=Symbol("proxy path"),Ot=new class extends Error{constructor(){super(...arguments);J(this,"name","StaleReactionError");J(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};var po=3,Le=8;function mo(e){if(b){let t=new Error(`lifecycle_outside_component
\`${e}(...)\` can only be used during component initialisation
https://svelte.dev/e/lifecycle_outside_component`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function xf(){if(b){let e=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ef(){if(b){let e=new Error(`derived_references_self
A derived value cannot reference itself recursively
https://svelte.dev/e/derived_references_self`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/derived_references_self")}function Cf(e){if(b){let t=new Error(`effect_in_teardown
\`${e}\` cannot be used inside an effect cleanup function
https://svelte.dev/e/effect_in_teardown`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_in_teardown")}function kf(){if(b){let e=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Tf(e){if(b){let t=new Error(`effect_orphan
\`${e}\` can only be used inside an effect (e.g. during component initialisation)
https://svelte.dev/e/effect_orphan`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/effect_orphan")}function Nf(){if(b){let e=new Error(`effect_update_depth_exceeded
Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state
https://svelte.dev/e/effect_update_depth_exceeded`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Pf(){if(b){let e=new Error("flush_sync_in_effect\nCannot use `flushSync` inside an effect\nhttps://svelte.dev/e/flush_sync_in_effect");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/flush_sync_in_effect")}function If(){if(b){let e=new Error(`hydration_failed
Failed to hydrate the application
https://svelte.dev/e/hydration_failed`);throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/hydration_failed")}function $f(e){if(b){let t=new Error(`props_invalid_value
Cannot do \`bind:${e}={undefined}\` when \`${e}\` has a fallback value
https://svelte.dev/e/props_invalid_value`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/props_invalid_value")}function Sf(e){if(b){let t=new Error(`rune_outside_svelte
The \`${e}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files
https://svelte.dev/e/rune_outside_svelte`);throw t.name="Svelte error",t}else throw new Error("https://svelte.dev/e/rune_outside_svelte")}function Df(){if(b){let e=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Rf(){if(b){let e=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Lf(){if(b){let e=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Mf(){if(b){let e=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw e.name="Svelte error",e}else throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}var Ft={};var re=Symbol(),Ge=Symbol("filename"),Bf=Symbol("hmr"),Of="http://www.w3.org/1999/xhtml";var kr="font-weight: bold",Tr="font-weight: normal";function Ff(e,t){b?console.warn(`%c[svelte] await_waterfall
%cAn async derived, \`${e}\` (${t}) was not read immediately after it resolved. This often indicates an unnecessary waterfall, which can slow down your app
https://svelte.dev/e/await_waterfall`,kr,Tr):console.warn("https://svelte.dev/e/await_waterfall")}function Yf(e,t,r){b?console.warn(`%c[svelte] hydration_attribute_changed
%cThe \`${e}\` attribute on \`${t}\` changed its value between server and client renders. The client value, \`${r}\`, will be ignored in favour of the server value
https://svelte.dev/e/hydration_attribute_changed`,kr,Tr):console.warn("https://svelte.dev/e/hydration_attribute_changed")}function Wf(e){b?console.warn(`%c[svelte] hydration_html_changed
%c${e?`The value of an \`{@html ...}\` block ${e} changed between server and client renders. The client value will be ignored in favour of the server value`:"The value of an `{@html ...}` block changed between server and client renders. The client value will be ignored in favour of the server value"}
https://svelte.dev/e/hydration_html_changed`,kr,Tr):console.warn("https://svelte.dev/e/hydration_html_changed")}function Nr(e){b?console.warn(`%c[svelte] hydration_mismatch
%c${e?`Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near ${e}`:"Hydration failed because the initial UI does not match what was rendered on the server"}
https://svelte.dev/e/hydration_mismatch`,kr,Tr):console.warn("https://svelte.dev/e/hydration_mismatch")}function Vf(){b?console.warn(`%c[svelte] lifecycle_double_unmount
%cTried to unmount a component that was not mounted
https://svelte.dev/e/lifecycle_double_unmount`,kr,Tr):console.warn("https://svelte.dev/e/lifecycle_double_unmount")}function mi(e){b?console.warn(`%c[svelte] state_proxy_equality_mismatch
%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${e}\` will produce unexpected results
https://svelte.dev/e/state_proxy_equality_mismatch`,kr,Tr):console.warn("https://svelte.dev/e/state_proxy_equality_mismatch")}function Hf(){b?console.warn(`%c[svelte] state_proxy_unmount
%cTried to unmount a state proxy, rather than a component
https://svelte.dev/e/state_proxy_unmount`,kr,Tr):console.warn("https://svelte.dev/e/state_proxy_unmount")}function Gf(){b?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",kr,Tr):console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}var k=!1;function Ne(e){k=e}var Y;function Q(e){if(e===null)throw Nr(),Ft;return Y=e}function ge(){return Q(we(Y))}function je(e){if(k){if(we(Y)!==null)throw Nr(),Ft;Y=e}}function Ds(e=1){if(k){for(var t=e,r=Y;t--;)r=we(r);Y=r}}function Yt(e=!0){for(var t=0,r=Y;;){if(r.nodeType===Le){var n=r.data;if(n==="]"){if(t===0)return r;t-=1}else(n==="["||n==="[!")&&(t+=1)}var o=we(r);e&&r.remove(),r=o}}function _i(e){if(!e||e.nodeType!==Le)throw Nr(),Ft;return e.data}function gi(e){return e===this.v}function vi(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function bi(e){return!vi(e,this.v)}var Xe=!1,Wt=!1,kt=!1;function jf(){Wt=!0}var ho=null;function Vt(e){let t=Error.stackTraceLimit;Error.stackTraceLimit=1/0;let r=Error();Error.stackTraceLimit=t;let n=r.stack;if(!n)return null;let o=n.split(`
`),i=[`
`];for(let s=0;s<o.length;s++){let a=o[s],l=a.replaceAll("\\","/");if(a!=="Error"){if(a.includes("validate_each_keys"))return null;l.includes("svelte/src/internal")||l.includes("node_modules/.vite")||i.push(a)}}return i.length===1?null:(ye(r,"stack",{value:i.join(`
`)}),ye(r,"name",{value:e}),r)}function Ue(e,t){return e.label=t,Ai(e.v,t),e}function Ai(e,t){return e?.[di]?.(t),e}var H=null;function ur(e){H=e}var Gt=null;function Cn(e){Gt=e}var Je=null;function yi(e){Je=e}function _o(e,t=!1,r){H={p:H,i:!1,c:null,e:null,s:e,x:null,l:Wt&&!t?{s:null,u:null,$:[]}:null},b&&(H.function=r,Je=r)}function go(e){var t=H,r=t.e;if(r!==null){t.e=null;for(var n of r)Ls(n)}return e!==void 0&&(t.x=e),t.i=!0,H=t.p,b&&(Je=H?.function??null),e??{}}function jt(){return!Wt||H!==null&&H.l===null}var Hr=[];function zf(){var e=Hr;Hr=[],xn(e)}function Ie(e){if(Hr.length===0&&!Gr){var t=Hr;queueMicrotask(()=>{t===Hr&&zf()})}Hr.push(e)}function Zf(){for(;Hr.length>0;)zf()}var Ms=new WeakMap;function wi(e){var t=T;if(t===null)return S.f|=8388608,e;if(b&&e instanceof Error&&!Ms.has(e)&&Ms.set(e,Md(e,t)),(t.f&32768)===0){if((t.f&128)===0)throw b&&!t.parent&&e instanceof Error&&qf(e),e;t.b.error(e)}else Ut(e,t)}function Ut(e,t){for(;t!==null;){if((t.f&128)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw b&&e instanceof Error&&qf(e),e}function Md(e,t){let r=Ve(e,"message");if(!(r&&!r.configurable)){for(var n=vo?"  ":"	",o=`
${n}in ${t.fn?.name||"<unknown>"}`,i=t.ctx;i!==null;)o+=`
${n}in ${i.function?.[Ge].split("/").pop()}`,i=i.p;return{message:e.message+`
${o}
`,stack:e.stack?.split(`
`).filter(s=>!s.includes("svelte/src/internal")).join(`
`)}}}function qf(e){let t=Ms.get(e);t&&(ye(e,"message",{value:t.message}),ye(e,"stack",{value:t.stack}))}var Tn=new Set,Z=null,bo=null,xe=null,mt=[],ki=null,Bs=!1,Gr=!1,Nn,Pn,Ur,zr,Ao,In,$n,ve,Os,jr,Fs,Xf,Kf,xi=class xi{constructor(){V(this,ve);J(this,"committed",!1);J(this,"current",new Map);J(this,"previous",new Map);V(this,Nn,new Set);V(this,Pn,new Set);V(this,Ur,0);V(this,zr,0);V(this,Ao,null);V(this,In,[]);V(this,$n,[]);J(this,"skipped_effects",new Set);J(this,"is_fork",!1)}is_deferred(){return this.is_fork||h(this,zr)>0}process(t){mt=[],bo=null,this.apply();var r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(let n of t)X(this,ve,Os).call(this,n,r);this.is_fork||X(this,ve,Xf).call(this),this.is_deferred()?(X(this,ve,jr).call(this,r.effects),X(this,ve,jr).call(this,r.render_effects),X(this,ve,jr).call(this,r.block_effects)):(bo=this,Z=null,Qf(r.render_effects),Qf(r.effects),bo=null,h(this,Ao)?.resolve()),xe=null}capture(t,r){this.previous.has(t)||this.previous.set(t,r),(t.f&8388608)===0&&(this.current.set(t,t.v),xe?.set(t,t.v))}activate(){Z=this,this.apply()}deactivate(){Z===this&&(Z=null,xe=null)}flush(){if(this.activate(),mt.length>0){if(Ys(),Z!==null&&Z!==this)return}else h(this,Ur)===0&&this.process([]);this.deactivate()}discard(){for(let t of h(this,Pn))t(this);h(this,Pn).clear()}increment(t){L(this,Ur,h(this,Ur)+1),t&&L(this,zr,h(this,zr)+1)}decrement(t){L(this,Ur,h(this,Ur)-1),t&&L(this,zr,h(this,zr)-1),this.revive()}revive(){for(let t of h(this,In))ae(t,2048),zt(t);for(let t of h(this,$n))ae(t,4096),zt(t);L(this,In,[]),L(this,$n,[]),this.flush()}oncommit(t){h(this,Nn).add(t)}ondiscard(t){h(this,Pn).add(t)}settled(){return(h(this,Ao)??L(this,Ao,pi())).promise}static ensure(){if(Z===null){let t=Z=new xi;Tn.add(Z),Gr||xi.enqueue(()=>{Z===t&&t.flush()})}return Z}static enqueue(t){Ie(t)}apply(){if(!(!Xe||!this.is_fork&&Tn.size===1)){xe=new Map(this.current);for(let t of Tn)if(t!==this)for(let[r,n]of t.previous)xe.has(r)||xe.set(r,n)}}};Nn=new WeakMap,Pn=new WeakMap,Ur=new WeakMap,zr=new WeakMap,Ao=new WeakMap,In=new WeakMap,$n=new WeakMap,ve=new WeakSet,Os=function(t,r){t.f^=1024;for(var n=t.first;n!==null;){var o=n.f,i=(o&96)!==0,s=i&&(o&1024)!==0,a=s||(o&8192)!==0||this.skipped_effects.has(n);if((n.f&128)!==0&&n.b?.is_pending()&&(r={parent:r,effect:n,effects:[],render_effects:[],block_effects:[]}),!a&&n.fn!==null){i?n.f^=1024:(o&4)!==0?r.effects.push(n):Xe&&(o&8)!==0?r.render_effects.push(n):mr(n)&&((n.f&16)!==0&&r.block_effects.push(n),dr(n));var l=n.first;if(l!==null){n=l;continue}}var f=n.parent;for(n=n.next;n===null&&f!==null;)f===r.effect&&(X(this,ve,jr).call(this,r.effects),X(this,ve,jr).call(this,r.render_effects),X(this,ve,jr).call(this,r.block_effects),r=r.parent),n=f.next,f=f.parent}},jr=function(t){for(let r of t)((r.f&2048)!==0?h(this,In):h(this,$n)).push(r),X(this,ve,Fs).call(this,r.deps),ae(r,1024)},Fs=function(t){if(t!==null)for(let r of t)(r.f&2)===0||(r.f&32768)===0||(r.f^=32768,X(this,ve,Fs).call(this,r.deps))},Xf=function(){if(h(this,zr)===0){for(let t of h(this,Nn))t();h(this,Nn).clear()}h(this,Ur)===0&&X(this,ve,Kf).call(this)},Kf=function(){var i;if(Tn.size>1){this.previous.clear();var t=xe,r=!0,n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(let s of Tn){if(s===this){r=!1;continue}let a=[];for(let[f,d]of this.current){if(s.current.has(f))if(r&&d!==s.current.get(f))s.current.set(f,d);else continue;a.push(f)}if(a.length===0)continue;let l=[...s.current.keys()].filter(f=>!this.current.has(f));if(l.length>0){var o=mt;mt=[];let f=new Set,d=new Map;for(let u of a)Jf(u,l,f,d);if(mt.length>0){Z=s,s.apply();for(let u of mt)X(i=s,ve,Os).call(i,u,n);s.deactivate()}mt=o}}Z=null,xe=t}this.committed=!0,Tn.delete(this)};var Oe=xi;function Ln(e){Xe&&T!==null&&Pf();var t=Gr;Gr=!0;try{var r;for(e&&(Z!==null&&Ys(),r=e());;){if(Zf(),mt.length===0&&(Z?.flush(),mt.length===0))return ki=null,r;Ys()}}finally{Gr=t}}function Ys(){var e=qt;Bs=!0;var t=b?new Set:null;try{var r=0;for(Sn(!0);mt.length>0;){var n=Oe.ensure();if(r++>1e3){if(b){var o=new Map;for(let s of n.current.keys())for(let[a,l]of s.updated??[]){var i=o.get(a);i||(i={error:l.error,count:0},o.set(a,i)),i.count+=l.count}for(let s of o.values())s.error&&console.error(s.error)}Bd()}if(n.process(mt),Zt.clear(),b)for(let s of n.current.keys())t.add(s)}}finally{if(Bs=!1,Sn(e),ki=null,b)for(let s of t)s.updated=null}}function Bd(){try{Nf()}catch(e){b&&ye(e,"stack",{value:""}),Ut(e,ki)}}var ht=null;function Qf(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&24576)===0&&mr(n)&&(ht=new Set,dr(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?Ws(n):n.fn=null),ht?.size>0)){Zt.clear();for(let o of ht){if((o.f&24576)!==0)continue;let i=[o],s=o.parent;for(;s!==null;)ht.has(s)&&(ht.delete(s),i.push(s)),s=s.parent;for(let a=i.length-1;a>=0;a--){let l=i[a];(l.f&24576)===0&&dr(l)}}ht.clear()}}ht=null}}function Jf(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(let o of e.reactions){let i=o.f;(i&2)!==0?Jf(o,t,r,n):(i&4194320)!==0&&(i&2048)===0&&ec(o,t,n)&&(ae(o,2048),zt(o))}}function ec(e,t,r){let n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(let o of e.deps){if(t.includes(o))return!0;if((o.f&2)!==0&&ec(o,t,r))return r.set(o,!0),!0}return r.set(e,!1),!1}function zt(e){for(var t=ki=e;t.parent!==null;){t=t.parent;var r=t.f;if(Bs&&t===T&&(r&16)!==0&&(r&262144)===0)return;if((r&96)!==0){if((r&1024)===0)return;t.f^=1024}}mt.push(t)}function Vs(e){let t=0,r=Se(0),n;return b&&Ue(r,"createSubscriber version"),()=>{Ht()&&($(r),be(()=>(t===0&&(n=W(()=>e(()=>Zr(r)))),t+=1,()=>{Ie(()=>{t-=1,t===0&&(n?.(),n=void 0,Zr(r))})})))}}var Fd=589952;function Us(e,t,r){new Hs(e,t,r)}var _t,tt,yo,Qt,qr,Xt,gt,Ze,Kt,hr,Ir,Qr,$r,Xr,_r,$i,he,rc,nc,Gs,Pi,Ii,js,Hs=class{constructor(t,r,n){V(this,he);J(this,"parent");V(this,_t,!1);V(this,tt);V(this,yo,k?Y:null);V(this,Qt);V(this,qr);V(this,Xt);V(this,gt,null);V(this,Ze,null);V(this,Kt,null);V(this,hr,null);V(this,Ir,null);V(this,Qr,0);V(this,$r,0);V(this,Xr,!1);V(this,_r,null);V(this,$i,Vs(()=>(L(this,_r,Se(h(this,Qr))),b&&Ue(h(this,_r),"$effect.pending()"),()=>{L(this,_r,null)})));L(this,tt,t),L(this,Qt,r),L(this,qr,n),this.parent=T.b,L(this,_t,!!h(this,Qt).pending),L(this,Xt,Fe(()=>{if(T.b=this,k){let i=h(this,yo);ge(),i.nodeType===Le&&i.data==="[!"?X(this,he,nc).call(this):X(this,he,rc).call(this)}else{var o=X(this,he,Gs).call(this);try{L(this,gt,Ee(()=>n(o)))}catch(i){this.error(i)}h(this,$r)>0?X(this,he,Ii).call(this):L(this,_t,!1)}return()=>{h(this,Ir)?.remove()}},Fd)),k&&L(this,tt,Y)}is_pending(){return h(this,_t)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!h(this,Qt).pending}update_pending_count(t){X(this,he,js).call(this,t),L(this,Qr,h(this,Qr)+t),h(this,_r)&&It(h(this,_r),h(this,Qr))}get_effect_pending(){return h(this,$i).call(this),$(h(this,_r))}error(t){var r=h(this,Qt).onerror;let n=h(this,Qt).failed;if(h(this,Xr)||!r&&!n)throw t;h(this,gt)&&(fe(h(this,gt)),L(this,gt,null)),h(this,Ze)&&(fe(h(this,Ze)),L(this,Ze,null)),h(this,Kt)&&(fe(h(this,Kt)),L(this,Kt,null)),k&&(Q(h(this,yo)),Ds(),Q(Yt()));var o=!1,i=!1;let s=()=>{if(o){Gf();return}o=!0,i&&Mf(),Oe.ensure(),L(this,Qr,0),h(this,Kt)!==null&&gr(h(this,Kt),()=>{L(this,Kt,null)}),L(this,_t,this.has_pending_snippet()),L(this,gt,X(this,he,Pi).call(this,()=>(L(this,Xr,!1),Ee(()=>h(this,qr).call(this,h(this,tt)))))),h(this,$r)>0?X(this,he,Ii).call(this):L(this,_t,!1)};var a=S;try{le(null),i=!0,r?.(t,s),i=!1}catch(l){Ut(l,h(this,Xt)&&h(this,Xt).parent)}finally{le(a)}n&&Ie(()=>{L(this,Kt,X(this,he,Pi).call(this,()=>{Oe.ensure(),L(this,Xr,!0);try{return Ee(()=>{n(h(this,tt),()=>t,()=>s)})}catch(l){return Ut(l,h(this,Xt).parent),null}finally{L(this,Xr,!1)}}))})}};_t=new WeakMap,tt=new WeakMap,yo=new WeakMap,Qt=new WeakMap,qr=new WeakMap,Xt=new WeakMap,gt=new WeakMap,Ze=new WeakMap,Kt=new WeakMap,hr=new WeakMap,Ir=new WeakMap,Qr=new WeakMap,$r=new WeakMap,Xr=new WeakMap,_r=new WeakMap,$i=new WeakMap,he=new WeakSet,rc=function(){try{L(this,gt,Ee(()=>h(this,qr).call(this,h(this,tt))))}catch(t){this.error(t)}L(this,_t,!1)},nc=function(){let t=h(this,Qt).pending;t&&(L(this,Ze,Ee(()=>t(h(this,tt)))),Oe.enqueue(()=>{var r=X(this,he,Gs).call(this);L(this,gt,X(this,he,Pi).call(this,()=>(Oe.ensure(),Ee(()=>h(this,qr).call(this,r))))),h(this,$r)>0?X(this,he,Ii).call(this):(gr(h(this,Ze),()=>{L(this,Ze,null)}),L(this,_t,!1))}))},Gs=function(){var t=h(this,tt);return h(this,_t)&&(L(this,Ir,Ce()),h(this,tt).before(h(this,Ir)),t=h(this,Ir)),t},Pi=function(t){var r=T,n=S,o=H;Ae(h(this,Xt)),le(h(this,Xt)),ur(h(this,Xt).ctx);try{return t()}catch(i){return wi(i),null}finally{Ae(r),le(n),ur(o)}},Ii=function(){let t=h(this,Qt).pending;h(this,gt)!==null&&(L(this,hr,document.createDocumentFragment()),h(this,hr).append(h(this,Ir)),Si(h(this,gt),h(this,hr))),h(this,Ze)===null&&L(this,Ze,Ee(()=>t(h(this,tt))))},js=function(t){var r;if(!this.has_pending_snippet()){this.parent&&X(r=this.parent,he,js).call(r,t);return}L(this,$r,h(this,$r)+t),h(this,$r)===0&&(L(this,_t,!1),h(this,Ze)&&gr(h(this,Ze),()=>{L(this,Ze,null)}),h(this,hr)&&(h(this,tt).before(h(this,hr)),L(this,hr,null)))};var Mn=null;function Zs(e,t){return t}function Vd(e,t,r){for(var n=[],o=t.length,i=0;i<o;i++)Ri(t[i].e,n,!0);Qs(n,()=>{var s=n.length===0&&r!==null;if(s){var a=r,l=a.parentNode;wo(l),l.append(a),e.items.clear(),Jt(e,t[0].prev,t[o-1].next)}for(var f=0;f<o;f++){var d=t[f];s||(e.items.delete(d.k),Jt(e,d.prev,d.next)),fe(d.e,!s)}e.first===t[0]&&(e.first=t[0].prev)})}function qs(e,t,r,n,o,i=null){var s=e,a=new Map,l=null,f=(t&4)!==0,d=(t&1)!==0,u=(t&2)!==0;if(f){var c=e;s=k?Q(_e(c)):c.appendChild(Ce())}k&&ge();var p=null,g=Kr(()=>{var N=r();return Bt(N)?N:N==null?[]:co(N)}),A,_=!0;function v(){Hd(D,A,s,t,n),p!==null&&(A.length===0?(p.fragment?(s.before(p.fragment),p.fragment=null):xo(p.effect),B.first=p.effect):gr(p.effect,()=>{p=null}))}var B=Fe(()=>{A=$(g);var N=A.length;let j=!1;if(k){var M=_i(s)==="[!";M!==(N===0)&&(s=Yt(),Q(s),Ne(!1),j=!0)}for(var y=new Set,E=Z,R=null,I=Di(),O=0;O<N;O+=1){k&&Y.nodeType===Le&&Y.data==="]"&&(s=Y,j=!0,Ne(!1));var F=A[O],U=n(F,O),ue=_?null:a.get(U);ue?(d&&It(ue.v,F),u?It(ue.i,O):ue.i=O,I&&E.skipped_effects.delete(ue.e)):(ue=Gd(_?s:null,R,F,U,O,o,t,r),_&&(ue.o=!0,R===null?l=ue:R.next=ue,R=ue),a.set(U,ue)),y.add(U)}if(N===0&&i&&!p)if(_)p={fragment:null,effect:Ee(()=>i(s))};else{var Rt=document.createDocumentFragment(),or=Ce();Rt.append(or),p={fragment:Rt,effect:Ee(()=>i(or))}}if(k&&N>0&&Q(Yt()),!_)if(I){for(let[K,oe]of a)y.has(K)||E.skipped_effects.add(oe.e);E.oncommit(v),E.ondiscard(()=>{})}else v();j&&Ne(!0),$(g)}),D={effect:B,flags:t,items:a,first:l};_=!1,k&&(s=Y)}function Hd(e,t,r,n,o){var i=(n&8)!==0,s=t.length,a=e.items,l=e.first,f,d=null,u,c=[],p=[],g,A,_,v;if(i)for(v=0;v<s;v+=1)g=t[v],A=o(g,v),_=a.get(A),_.a?.measure(),(u??(u=new Set)).add(_);for(v=0;v<s;v+=1){if(g=t[v],A=o(g,v),_=a.get(A),e.first??(e.first=_),!_.o){_.o=!0;var B=d?d.next:l;Jt(e,d,_),Jt(e,_,B),zs(_,B,r),d=_,c=[],p=[],l=d.next;continue}if((_.e.f&8192)!==0&&(xo(_.e),i&&(_.a?.unfix(),(u??(u=new Set)).delete(_))),_!==l){if(f!==void 0&&f.has(_)){if(c.length<p.length){var D=p[0],N;d=D.prev;var j=c[0],M=c[c.length-1];for(N=0;N<c.length;N+=1)zs(c[N],D,r);for(N=0;N<p.length;N+=1)f.delete(p[N]);Jt(e,j.prev,M.next),Jt(e,d,j),Jt(e,M,D),l=D,d=M,v-=1,c=[],p=[]}else f.delete(_),zs(_,l,r),Jt(e,_.prev,_.next),Jt(e,_,d===null?e.first:d.next),Jt(e,d,_),d=_;continue}for(c=[],p=[];l!==null&&l.k!==A;)(l.e.f&8192)===0&&(f??(f=new Set)).add(l),p.push(l),l=l.next;if(l===null)continue;_=l}c.push(_),d=_,l=_.next}if(l!==null||f!==void 0){for(var y=f===void 0?[]:co(f);l!==null;)(l.e.f&8192)===0&&y.push(l),l=l.next;var E=y.length;if(E>0){var R=(n&4)!==0&&s===0?r:null;if(i){for(v=0;v<E;v+=1)y[v].a?.measure();for(v=0;v<E;v+=1)y[v].a?.fix()}Vd(e,y,R)}}i&&Ie(()=>{if(u!==void 0)for(_ of u)_.a?.apply()})}function Gd(e,t,r,n,o,i,s,a){var l=Mn,f=(s&1)!==0,d=(s&16)===0,u=f?d?vt(r,!1,!1):Se(r):r,c=(s&2)===0?o:Se(o);b&&f&&(u.trace=()=>{var A=typeof c=="number"?o:c.v;a()[A]});var p={i:c,v:u,k:n,a:null,e:null,o:!1,prev:t,next:null};Mn=p;try{if(e===null){var g=document.createDocumentFragment();g.append(e=Ce())}return p.e=Ee(()=>i(e,u,c,a)),t!==null&&(t.next=p),p}finally{Mn=l}}function zs(e,t,r){for(var n=e.next?e.next.e.nodes_start:r,o=t?t.e.nodes_start:r,i=e.e.nodes_start;i!==null&&i!==n;){var s=we(i);o.before(i),i=s}}function Jt(e,t,r){t===null?(e.first=r,e.effect.first=r&&r.e):(t.e.next&&(t.e.next.prev=null),t.next=r,t.e.next=r&&r.e),r===null?e.effect.last=t&&t.e:(r.e.prev&&(r.e.prev.next=null),r.prev=t,r.e.prev=t&&t.e)}function Li(e,t,r,n){let o=jt()?Jr:Kr;if(r.length===0&&e.length===0){n(t.map(o));return}var i=Z,s=T,a=ac();function l(){Promise.all(r.map(f=>Ks(f))).then(f=>{a();try{n([...t.map(o),...f])}catch(d){(s.f&16384)===0&&Ut(d,s)}i?.deactivate(),Bn()}).catch(f=>{Ut(f,s)})}e.length>0?Promise.all(e).then(()=>{a();try{return l()}finally{i?.deactivate(),Bn()}}):l()}function ac(){var e=T,t=S,r=H,n=Z;if(b)var o=Gt;return function(s=!0){Ae(e),le(t),ur(r),s&&n?.activate(),b&&(Xs(null),Cn(o))}}function Bn(){Ae(null),le(null),ur(null),b&&(Xs(null),Cn(null))}var Eo=null;function Xs(e){Eo=e}var Co=new Set;function Jr(e){var t=2050,r=S!==null&&(S.f&2)!==0?S:null;T!==null&&(T.f|=524288);let n={ctx:H,deps:null,effects:null,equals:gi,f:t,fn:e,reactions:null,rv:0,v:re,wv:0,parent:r??T,ac:null};return b&&kt&&(n.created=Vt("created at")),n}function Ks(e,t){let r=T;r===null&&xf();var n=r.b,o=void 0,i=Se(re),s=!S,a=new Map;return lc(()=>{b&&(Eo=T);var l=pi();o=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{f===Z&&f.committed&&f.deactivate(),Bn()})}catch(c){l.reject(c),Bn()}b&&(Eo=null);var f=Z;if(s){var d=!n.is_pending();n.update_pending_count(1),f.increment(d),a.get(f)?.reject(Ot),a.delete(f),a.set(f,l)}let u=(c,p=void 0)=>{if(Eo=null,f.activate(),p)p!==Ot&&(i.f|=8388608,It(i,p));else{(i.f&8388608)!==0&&(i.f^=8388608),It(i,c);for(let[g,A]of a){if(a.delete(g),g===f)break;A.reject(Ot)}b&&t!==void 0&&(Co.add(i),setTimeout(()=>{Co.has(i)&&(Ff(i.label,t),Co.delete(i))}))}s&&(n.update_pending_count(-1),f.decrement(d))};l.promise.then(u,c=>u(null,c||"unknown"))}),De(()=>{for(let l of a.values())l.reject(Ot)}),b&&(i.f|=4194304),new Promise(l=>{function f(d){function u(){d===o?l(i):f(o)}d.then(u,u)}f(o)})}function Kr(e){let t=Jr(e);return t.equals=bi,t}function Mi(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)fe(t[r])}}var Js=[];function Zd(e){for(var t=e.parent;t!==null;){if((t.f&2)===0)return(t.f&16384)===0?t:null;t=t.parent}return null}function ko(e){var t,r=T;if(Ae(Zd(e)),b){let n=en;Ti(new Set);try{Js.includes(e)&&Ef(),Js.push(e),e.f&=-32769,Mi(e),t=Bi(e)}finally{Ae(r),Ti(n),Js.pop()}}else try{e.f&=-32769,Mi(e),t=Bi(e)}finally{Ae(r)}return t}function ea(e){var t=ko(e);if(e.equals(t)||(Z?.is_fork||(e.v=t),e.wv=To()),!$t)if(xe!==null)Ht()&&xe.set(e,t);else{var r=(e.f&512)===0?4096:1024;ae(e,r)}}var en=new Set,Zt=new Map;function Ti(e){en=e}var ra=!1;function fc(){ra=!0}function Se(e,t){var r={f:0,v:e,reactions:null,equals:gi,rv:0,wv:0};return b&&kt&&(r.created=t??Vt("created at"),r.updated=null,r.set_during_effect=!1,r.trace=null),r}function er(e,t){let r=Se(e,t);return ta(r),r}function vt(e,t=!1,r=!0){var o;let n=Se(e);return t||(n.equals=bi),Wt&&r&&H!==null&&H.l!==null&&((o=H.l).s??(o.s=[])).push(n),n}function ce(e,t,r=!1){S!==null&&(!ot||(S.f&131072)!==0)&&jt()&&(S.f&4325394)!==0&&!tr?.includes(e)&&Lf();let n=r?br(t):t;return b&&Ai(n,e.label),It(e,n)}function It(e,t){if(!e.equals(t)){var r=e.v;$t?Zt.set(e,t):Zt.set(e,r),e.v=t;var n=Oe.ensure();if(n.capture(e,r),b){if(kt||T!==null){e.updated??(e.updated=new Map);let o=(e.updated.get("")?.count??0)+1;if(e.updated.set("",{error:null,count:o}),kt||o>5){let i=Vt("updated at");if(i!==null){let s=e.updated.get(i.stack);s||(s={error:i,count:0},e.updated.set(i.stack,s)),s.count++}}}T!==null&&(e.set_during_effect=!0)}(e.f&2)!==0&&((e.f&2048)!==0&&ko(e),ae(e,(e.f&512)!==0?1024:4096)),e.wv=To(),cc(e,2048),jt()&&T!==null&&(T.f&1024)!==0&&(T.f&96)===0&&(nt===null?uc([e]):nt.push(e)),!n.is_fork&&en.size>0&&!ra&&Ni()}return t}function Ni(){ra=!1;var e=qt;Sn(!0);let t=Array.from(en);try{for(let r of t)(r.f&1024)!==0&&ae(r,4096),mr(r)&&dr(r)}finally{Sn(e)}en.clear()}function Zr(e){ce(e,e.v+1)}function cc(e,t){var r=e.reactions;if(r!==null)for(var n=jt(),o=r.length,i=0;i<o;i++){var s=r[i],a=s.f;if(!(!n&&s===T)){if(b&&(a&131072)!==0){en.add(s);continue}var l=(a&2048)===0;if(l&&ae(s,t),(a&2)!==0){var f=s;xe?.delete(f),(a&32768)===0&&(a&512&&(s.f|=32768),cc(f,4096))}else l&&((a&16)!==0&&ht!==null&&ht.add(s),zt(s))}}}var qd=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function br(e){if(typeof e!="object"||e===null||Te in e)return e;let t=Vr(e);if(t!==$s&&t!==Af)return e;var r=new Map,n=Bt(e),o=er(0),i=b&&kt?Vt("created at"):null,s=Sr,a=u=>{if(Sr===s)return u();var c=S,p=Sr;le(null),na(s);var g=u();return le(c),na(p),g};n&&(r.set("length",er(e.length,i)),b&&(e=Xd(e)));var l="";let f=!1;function d(u){if(!f){f=!0,l=u,Ue(o,`${l} version`);for(let[c,p]of r)Ue(p,tn(l,c));f=!1}}return new Proxy(e,{defineProperty(u,c,p){(!("value"in p)||p.configurable===!1||p.enumerable===!1||p.writable===!1)&&Df();var g=r.get(c);return g===void 0?g=a(()=>{var A=er(p.value,i);return r.set(c,A),b&&typeof c=="string"&&Ue(A,tn(l,c)),A}):ce(g,p.value,!0),!0},deleteProperty(u,c){var p=r.get(c);if(p===void 0){if(c in u){let g=a(()=>er(re,i));r.set(c,g),Zr(o),b&&Ue(g,tn(l,c))}}else ce(p,re),Zr(o);return!0},get(u,c,p){if(c===Te)return e;if(b&&c===di)return d;var g=r.get(c),A=c in u;if(g===void 0&&(!A||Ve(u,c)?.writable)&&(g=a(()=>{var v=br(A?u[c]:re),B=er(v,i);return b&&Ue(B,tn(l,c)),B}),r.set(c,g)),g!==void 0){var _=$(g);return _===re?void 0:_}return Reflect.get(u,c,p)},getOwnPropertyDescriptor(u,c){var p=Reflect.getOwnPropertyDescriptor(u,c);if(p&&"value"in p){var g=r.get(c);g&&(p.value=$(g))}else if(p===void 0){var A=r.get(c),_=A?.v;if(A!==void 0&&_!==re)return{enumerable:!0,configurable:!0,value:_,writable:!0}}return p},has(u,c){if(c===Te)return!0;var p=r.get(c),g=p!==void 0&&p.v!==re||Reflect.has(u,c);if(p!==void 0||T!==null&&(!g||Ve(u,c)?.writable)){p===void 0&&(p=a(()=>{var _=g?br(u[c]):re,v=er(_,i);return b&&Ue(v,tn(l,c)),v}),r.set(c,p));var A=$(p);if(A===re)return!1}return g},set(u,c,p,g){var A=r.get(c),_=c in u;if(n&&c==="length")for(var v=p;v<A.v;v+=1){var B=r.get(v+"");B!==void 0?ce(B,re):v in u&&(B=a(()=>er(re,i)),r.set(v+"",B),b&&Ue(B,tn(l,v)))}if(A===void 0)(!_||Ve(u,c)?.writable)&&(A=a(()=>er(void 0,i)),b&&Ue(A,tn(l,c)),ce(A,br(p)),r.set(c,A));else{_=A.v!==re;var D=a(()=>br(p));ce(A,D)}var N=Reflect.getOwnPropertyDescriptor(u,c);if(N?.set&&N.set.call(g,p),!_){if(n&&typeof c=="string"){var j=r.get("length"),M=Number(c);Number.isInteger(M)&&M>=j.v&&ce(j,M+1)}Zr(o)}return!0},ownKeys(u){$(o);var c=Reflect.ownKeys(u).filter(A=>{var _=r.get(A);return _===void 0||_.v!==re});for(var[p,g]of r)g.v!==re&&!(p in u)&&c.push(p);return c},setPrototypeOf(){Rf()}})}function tn(e,t){return typeof t=="symbol"?`${e}[Symbol(${t.description??""})]`:qd.test(t)?`${e}.${t}`:/^\d+$/.test(t)?`${e}[${t}]`:`${e}['${t}']`}function Oi(e){try{if(e!==null&&typeof e=="object"&&Te in e)return e[Te]}catch{}return e}var Qd=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function Xd(e){return new Proxy(e,{get(t,r,n){var o=Reflect.get(t,r,n);return Qd.has(r)?function(...i){fc();var s=o.apply(this,i);return Ni(),s}:o}})}function pc(){let e=Array.prototype,t=Array.__svelte_cleanup;t&&t();let{indexOf:r,lastIndexOf:n,includes:o}=e;e.indexOf=function(i,s){let a=r.call(this,i,s);if(a===-1){for(let l=s??0;l<this.length;l+=1)if(Oi(this[l])===i){mi("array.indexOf(...)");break}}return a},e.lastIndexOf=function(i,s){let a=n.call(this,i,s??this.length-1);if(a===-1){for(let l=0;l<=(s??this.length-1);l+=1)if(Oi(this[l])===i){mi("array.lastIndexOf(...)");break}}return a},e.includes=function(i,s){let a=o.call(this,i,s);if(!a){for(let l=0;l<this.length;l+=1)if(Oi(this[l])===i){mi("array.includes(...)");break}}return a},Array.__svelte_cleanup=()=>{e.indexOf=r,e.lastIndexOf=n,e.includes=o}}var oa,dc,vo,mc,hc;function Fi(){if(oa===void 0){oa=window,dc=document,vo=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;mc=Ve(t,"firstChild").get,hc=Ve(t,"nextSibling").get,Ss(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ss(r)&&(r.__t=void 0),b&&(e.__svelte_meta=null,pc())}}function Ce(e=""){return document.createTextNode(e)}function _e(e){return mc.call(e)}function we(e){return hc.call(e)}function it(e,t){if(!k)return _e(e);var r=_e(Y);if(r===null)r=Y.appendChild(Ce());else if(t&&r.nodeType!==po){var n=Ce();return r?.before(n),Q(n),n}return Q(r),r}function ia(e,t=!1){if(!k){var r=_e(e);return r instanceof Comment&&r.data===""?we(r):r}if(t&&Y?.nodeType!==po){var n=Ce();return Y?.before(n),Q(n),n}return Y}function Dr(e,t=1,r=!1){let n=k?Y:e;for(var o;t--;)o=n,n=we(n);if(!k)return n;if(r&&n?.nodeType!==po){var i=Ce();return n===null?o?.after(i):n.before(i),Q(i),i}return Q(n),n}function wo(e){e.textContent=""}function Di(){if(!Xe||ht!==null)return!1;var e=T.f;return(e&32768)!==0}var _c=!1;function Yi(){_c||(_c=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(let t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Rr(e){var t=S,r=T;le(null),Ae(null);try{return e()}finally{le(t),Ae(r)}}function sa(e,t,r,n=r){e.addEventListener(t,()=>Rr(r));let o=e.__on_r;o?e.__on_r=()=>{o(),n(!0)}:e.__on_r=()=>n(!0),Yi()}function la(e){T===null&&(S===null&&Tf(e),kf()),$t&&Cf(e)}function Kd(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function St(e,t,r){var n=T;if(b)for(;n!==null&&(n.f&131072)!==0;)n=n.parent;n!==null&&(n.f&8192)!==0&&(e|=8192);var o={ctx:H,deps:null,nodes_start:null,nodes_end:null,f:e|2048|512,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(b&&(o.component_function=Je),r)try{dr(o),o.f|=32768}catch(a){throw fe(o),a}else t!==null&&zt(o);var i=o;if(r&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&524288)===0&&(i=i.first,(e&16)!==0&&(e&65536)!==0&&i!==null&&(i.f|=65536)),i!==null&&(i.parent=n,n!==null&&Kd(i,n),S!==null&&(S.f&2)!==0&&(e&64)===0)){var s=S;(s.effects??(s.effects=[])).push(i)}return o}function Ht(){return S!==null&&!ot}function De(e){let t=St(8,null,!1);return ae(t,1024),t.teardown=e,t}function On(e){la("$effect"),b&&ye(e,"name",{value:"$effect"});var t=T.f,r=!S&&(t&32)!==0&&(t&32768)===0;if(r){var n=H;(n.e??(n.e=[])).push(e)}else return Ls(e)}function Ls(e){return St(1048580,e,!1)}function No(e){return la("$effect.pre"),b&&ye(e,"name",{value:"$effect.pre"}),St(1048584,e,!0)}function Wi(e){Oe.ensure();let t=St(524352,e,!0);return()=>{fe(t)}}function vc(e){Oe.ensure();let t=St(524352,e,!0);return(r={})=>new Promise(n=>{r.outro?gr(t,()=>{fe(t),n(void 0)}):(fe(t),n(void 0))})}function bt(e){return St(4,e,!1)}function fa(e,t){var r=H,n={effect:null,ran:!1,deps:e};r.l.$.push(n),n.effect=be(()=>{e(),!n.ran&&(n.ran=!0,W(t))})}function ca(){var e=H;be(()=>{for(var t of e.l.$){t.deps();var r=t.effect;(r.f&1024)!==0&&ae(r,4096),mr(r)&&dr(r),t.ran=!1}})}function lc(e){return St(4718592,e,!0)}function be(e,t=0){return St(8|t,e,!0)}function rn(e,t=[],r=[],n=[]){Li(n,t,r,o=>{St(8,()=>e(...o.map($)),!0)})}function Fe(e,t=0){var r=St(16|t,e,!0);return b&&(r.dev_stack=Gt),r}function Ee(e){return St(524320,e,!0)}function ua(e){var t=e.teardown;if(t!==null){let r=$t,n=S;aa(!0),le(null);try{t.call(null)}finally{aa(r),le(n)}}}function pa(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){let o=r.ac;o!==null&&Rr(()=>{o.abort(Ot)});var n=r.next;(r.f&64)!==0?r.parent=null:fe(r,t),r=n}}function bc(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&32)===0&&fe(t),t=r}}function fe(e,t=!0){var r=!1;(t||(e.f&262144)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(da(e.nodes_start,e.nodes_end),r=!0),pa(e,t&&!r),Po(e,0),ae(e,16384);var n=e.transitions;if(n!==null)for(let i of n)i.stop();ua(e);var o=e.parent;o!==null&&o.first!==null&&Ws(e),b&&(e.component_function=null),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function da(e,t){for(;e!==null;){var r=e===t?null:we(e);e.remove(),e=r}}function Ws(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function gr(e,t,r=!0){var n=[];Ri(e,n,!0),Qs(n,()=>{r&&fe(e),t&&t()})}function Qs(e,t){var r=e.length;if(r>0){var n=()=>--r||t();for(var o of e)o.out(n)}else t()}function Ri(e,t,r){if((e.f&8192)===0){if(e.f^=8192,e.transitions!==null)for(let s of e.transitions)(s.is_global||r)&&t.push(s);for(var n=e.first;n!==null;){var o=n.next,i=(n.f&65536)!==0||(n.f&32)!==0&&(e.f&16)!==0;Ri(n,t,i?r:!1),n=o}}}function xo(e){Ac(e,!0)}function Ac(e,t){if((e.f&8192)!==0){e.f^=8192,(e.f&1024)===0&&(ae(e,2048),zt(e));for(var r=e.first;r!==null;){var n=r.next,o=(r.f&65536)!==0||(r.f&32)!==0;Ac(r,o?t:!1),r=n}if(e.transitions!==null)for(let i of e.transitions)(i.is_global||t)&&i.in()}}function Si(e,t){for(var r=e.nodes_start,n=e.nodes_end;r!==null;){var o=r===n?null:we(r);t.append(r),r=o}}var yc=null;var qt=!1;function Sn(e){qt=e}var $t=!1;function aa(e){$t=e}var S=null,ot=!1;function le(e){S=e}var T=null;function Ae(e){T=e}var tr=null;function ta(e){S!==null&&(!Xe||(S.f&2)!==0)&&(tr===null?tr=[e]:tr.push(e))}var Ye=null,st=0,nt=null;function uc(e){nt=e}var wc=1,Io=0,Sr=Io;function na(e){Sr=e}function To(){return++wc}function mr(e){var t=e.f;if((t&2048)!==0)return!0;if(t&2&&(e.f&=-32769),(t&4096)!==0){var r=e.deps;if(r!==null)for(var n=r.length,o=0;o<n;o++){var i=r[o];if(mr(i)&&ea(i),i.wv>e.wv)return!0}(t&512)!==0&&xe===null&&ae(e,1024)}return!1}function xc(e,t,r=!0){var n=e.reactions;if(n!==null&&!(!Xe&&tr?.includes(e)))for(var o=0;o<n.length;o++){var i=n[o];(i.f&2)!==0?xc(i,t,!1):t===i&&(r?ae(i,2048):(i.f&1024)!==0&&ae(i,4096),zt(i))}}function Bi(e){var g;var t=Ye,r=st,n=nt,o=S,i=tr,s=H,a=ot,l=Sr,f=e.f;Ye=null,st=0,nt=null,S=(f&96)===0?e:null,tr=null,ur(e.ctx),ot=!1,Sr=++Io,e.ac!==null&&(Rr(()=>{e.ac.abort(Ot)}),e.ac=null);try{e.f|=2097152;var d=e.fn,u=d(),c=e.deps;if(Ye!==null){var p;if(Po(e,st),c!==null&&st>0)for(c.length=st+Ye.length,p=0;p<Ye.length;p++)c[st+p]=Ye[p];else e.deps=c=Ye;if(qt&&Ht()&&(e.f&512)!==0)for(p=st;p<c.length;p++)((g=c[p]).reactions??(g.reactions=[])).push(e)}else c!==null&&st<c.length&&(Po(e,st),c.length=st);if(jt()&&nt!==null&&!ot&&c!==null&&(e.f&6146)===0)for(p=0;p<nt.length;p++)xc(nt[p],e);return o!==null&&o!==e&&(Io++,nt!==null&&(n===null?n=nt:n.push(...nt))),(e.f&8388608)!==0&&(e.f^=8388608),u}catch(A){return wi(A)}finally{e.f^=2097152,Ye=t,st=r,nt=n,S=o,tr=i,ur(s),ot=a,Sr=l}}function Jd(e,t){let r=t.reactions;if(r!==null){var n=bf.call(r,e);if(n!==-1){var o=r.length-1;o===0?r=t.reactions=null:(r[n]=r[o],r.pop())}}r===null&&(t.f&2)!==0&&(Ye===null||!Ye.includes(t))&&(ae(t,4096),(t.f&512)!==0&&(t.f^=512,t.f&=-32769),Mi(t),Po(t,0))}function Po(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)Jd(e,r[n])}function dr(e){var t=e.f;if((t&16384)===0){ae(e,1024);var r=T,n=qt;if(T=e,qt=!0,b){var o=Je;yi(e.component_function);var i=Gt;Cn(e.dev_stack??Gt)}try{(t&16)!==0?bc(e):pa(e),ua(e);var s=Bi(e);if(e.teardown=typeof s=="function"?s:null,e.wv=wc,b&&kt&&(e.f&2048)!==0&&e.deps!==null)for(var a of e.deps)a.set_during_effect&&(a.wv=To(),a.set_during_effect=!1)}finally{qt=n,T=r,b&&(yi(o),Cn(i))}}}function $(e){var t=e.f,r=(t&2)!==0;if(yc?.add(e),S!==null&&!ot){var n=T!==null&&(T.f&16384)!==0;if(!n&&!tr?.includes(e)){var o=S.deps;if((S.f&2097152)!==0)e.rv<Io&&(e.rv=Io,Ye===null&&o!==null&&o[st]===e?st++:Ye===null?Ye=[e]:Ye.includes(e)||Ye.push(e));else{(S.deps??(S.deps=[])).push(e);var i=e.reactions;i===null?e.reactions=[S]:i.includes(S)||i.push(S)}}}if(b&&(Co.delete(e),kt&&!ot&&ho!==null&&S!==null&&ho.reaction===S))if(e.trace)e.trace();else{var s=Vt("traced at");if(s){var a=ho.entries.get(e);a===void 0&&(a={traces:[]},ho.entries.set(e,a));var l=a.traces[a.traces.length-1];s.stack!==l?.stack&&a.traces.push(s)}}if($t){if(Zt.has(e))return Zt.get(e);if(r){var f=e,d=f.v;return((f.f&1024)===0&&f.reactions!==null||Cc(f))&&(d=ko(f)),Zt.set(f,d),d}}else r&&!xe?.has(e)&&(f=e,mr(f)&&ea(f),qt&&Ht()&&(f.f&512)===0&&Ec(f));if(xe?.has(e))return xe.get(e);if((e.f&8388608)!==0)throw e.v;return e.v}function Ec(e){if(e.deps!==null){e.f^=512;for(let t of e.deps)(t.reactions??(t.reactions=[])).push(e),(t.f&2)!==0&&(t.f&512)===0&&Ec(t)}}function Cc(e){if(e.v===re)return!0;if(e.deps===null)return!1;for(let t of e.deps)if(Zt.has(t)||(t.f&2)!==0&&Cc(t))return!0;return!1}function W(e){var t=ot;try{return ot=!0,e()}finally{ot=t}}var em=-7169;function ae(e,t){e.f=e.f&em|t}function nn(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Te in e)Vi(e);else if(!Array.isArray(e))for(let t in e){let r=e[t];typeof r=="object"&&r&&Te in r&&Vi(r)}}}function Vi(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let n in e)try{Vi(e[n],t)}catch{}let r=Vr(e);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){let n=ui(r);for(let o in n){let i=n[o].get;if(i)try{i.call(e)}catch{}}}}}var rm=/\r/g;function kc(e){e=e.replace(rm,"");let t=5381,r=e.length;for(;r--;)t=(t<<5)-t^e.charCodeAt(r);return(t>>>0).toString(36)}var nm=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","webkitdirectory","defer","disablepictureinpicture","disableremoteplayback"];var VE=[...nm,"formNoValidate","isMap","noModule","playsInline","readOnly","value","volume","defaultValue","defaultChecked","srcObject","noValidate","allowFullscreen","disablePictureInPicture","disableRemotePlayback"];var om=["touchstart","touchmove"];function Tc(e){return om.includes(e)}var im=["$state","$state.raw","$derived","$derived.by"],HE=[...im,"$state.eager","$state.snapshot","$props","$props.id","$bindable","$effect","$effect.pre","$effect.tracking","$effect.root","$effect.pending","$inspect","$inspect().with","$inspect.trace","$host"];function Hi(e){return e?.replace(/\//g,"/\u200B")}var Nc=new Map;function Pc(e,t){var r=Nc.get(e);r||(r=new Set,Nc.set(e,r)),r.add(t)}var Sc=new Set,ha=new Set;var $c=null;function $o(e){var t=this,r=t.ownerDocument,n=e.type,o=e.composedPath?.()||[],i=o[0]||e.target;$c=e;var s=0,a=$c===e&&e.__root;if(a){var l=o.indexOf(a);if(l!==-1&&(t===document||t===window)){e.__root=t;return}var f=o.indexOf(t);if(f===-1)return;l<=f&&(s=l)}if(i=o[s]||e.target,i!==t){ye(e,"currentTarget",{configurable:!0,get(){return i||r}});var d=S,u=T;le(null),Ae(null);try{for(var c,p=[];i!==null;){var g=i.assignedSlot||i.parentNode||i.host||null;try{var A=i["__"+n];A!=null&&(!i.disabled||e.target===i)&&A.call(i,e)}catch(_){c?p.push(_):c=_}if(e.cancelBubble||g===t||g===null)break;i=g}if(c){for(let _ of p)queueMicrotask(()=>{throw _});throw c}}finally{e.__root=t,delete e.currentTarget,le(d),Ae(u)}}}function So(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function rr(e,t){var r=T;r.nodes_start===null&&(r.nodes_start=e,r.nodes_end=t)}function Fn(e,t){var r=(t&1)!==0,n=(t&2)!==0,o,i=!e.startsWith("<!>");return()=>{if(k)return rr(Y,null),Y;o===void 0&&(o=So(i?e:"<!>"+e),r||(o=_e(o)));var s=n||vo?document.importNode(o,!0):o.cloneNode(!0);if(r){var a=_e(s),l=s.lastChild;rr(a,l)}else rr(s,s);return s}}function Lr(e,t){if(k){var r=T;((r.f&32768)===0||r.nodes_end===null)&&(r.nodes_end=Y),ge();return}e!==null&&e.before(t)}var _a=!0;function Gi(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=r,e.nodeValue=r+"")}function Wn(e,t){return Rc(e,t)}function va(e,t){Fi(),t.intro=t.intro??!1;let r=t.target,n=k,o=Y;try{for(var i=_e(r);i&&(i.nodeType!==Le||i.data!=="[");)i=we(i);if(!i)throw Ft;Ne(!0),Q(i);let s=Rc(e,{...t,anchor:i});return Ne(!1),s}catch(s){if(s instanceof Error&&s.message.split(`
`).some(a=>a.startsWith("https://svelte.dev/e/")))throw s;return s!==Ft&&console.warn("Failed to hydrate: ",s),t.recover===!1&&If(),Fi(),wo(r),Ne(!1),Wn(e,t)}finally{Ne(n),Q(o)}}var Yn=new Map;function Rc(e,{target:t,anchor:r,props:n={},events:o,context:i,intro:s=!0}){Fi();var a=new Set,l=u=>{for(var c=0;c<u.length;c++){var p=u[c];if(!a.has(p)){a.add(p);var g=Tc(p);t.addEventListener(p,$o,{passive:g});var A=Yn.get(p);A===void 0?(document.addEventListener(p,$o,{passive:g}),Yn.set(p,1)):Yn.set(p,A+1)}}};l(co(Sc)),ha.add(l);var f=void 0,d=vc(()=>{var u=r??t.appendChild(Ce());return Us(u,{pending:()=>{}},c=>{if(i){_o({});var p=H;p.c=i}if(o&&(n.$$events=o),k&&rr(c,null),_a=s,f=e(c,n)||{},_a=!0,k&&(T.nodes_end=Y,Y===null||Y.nodeType!==Le||Y.data!=="]"))throw Nr(),Ft;i&&go()}),()=>{for(var c of a){t.removeEventListener(c,$o);var p=Yn.get(c);--p===0?(document.removeEventListener(c,$o),Yn.delete(c)):Yn.set(c,p)}ha.delete(l),u!==r&&u.parentNode?.removeChild(u)}});return ga.set(f,d),f}var ga=new WeakMap;function Do(e,t){let r=ga.get(e);return r?(ga.delete(e),r(t)):(b&&(Te in e?Hf():Vf()),Promise.resolve())}var Dt,nr,at,on,Ro,Lo,ji,Ar=class{constructor(t,r=!0){J(this,"anchor");V(this,Dt,new Map);V(this,nr,new Map);V(this,at,new Map);V(this,on,new Set);V(this,Ro,!0);V(this,Lo,()=>{var t=Z;if(h(this,Dt).has(t)){var r=h(this,Dt).get(t),n=h(this,nr).get(r);if(n)xo(n),h(this,on).delete(r);else{var o=h(this,at).get(r);o&&(h(this,nr).set(r,o.effect),h(this,at).delete(r),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),n=o.effect)}for(let[i,s]of h(this,Dt)){if(h(this,Dt).delete(i),i===t)break;let a=h(this,at).get(s);a&&(fe(a.effect),h(this,at).delete(s))}for(let[i,s]of h(this,nr)){if(i===r||h(this,on).has(i))continue;let a=()=>{if(Array.from(h(this,Dt).values()).includes(i)){var f=document.createDocumentFragment();Si(s,f),f.append(Ce()),h(this,at).set(i,{effect:s,fragment:f})}else fe(s);h(this,on).delete(i),h(this,nr).delete(i)};h(this,Ro)||!n?(h(this,on).add(i),gr(s,a,!1)):a()}}});V(this,ji,t=>{h(this,Dt).delete(t);let r=Array.from(h(this,Dt).values());for(let[n,o]of h(this,at))r.includes(n)||(fe(o.effect),h(this,at).delete(n))});this.anchor=t,L(this,Ro,r)}ensure(t,r){var n=Z,o=Di();if(r&&!h(this,nr).has(t)&&!h(this,at).has(t))if(o){var i=document.createDocumentFragment(),s=Ce();i.append(s),h(this,at).set(t,{effect:Ee(()=>r(s)),fragment:i})}else h(this,nr).set(t,Ee(()=>r(this.anchor)));if(h(this,Dt).set(n,t),o){for(let[a,l]of h(this,nr))a===t?n.skipped_effects.delete(l):n.skipped_effects.add(l);for(let[a,l]of h(this,at))a===t?n.skipped_effects.delete(l.effect):n.skipped_effects.add(l.effect);n.oncommit(h(this,Lo)),n.ondiscard(h(this,ji))}else k&&(this.anchor=Y),h(this,Lo).call(this)}};Dt=new WeakMap,nr=new WeakMap,at=new WeakMap,on=new WeakMap,Ro=new WeakMap,Lo=new WeakMap,ji=new WeakMap;function ba(e,t,r=!1){k&&ge();var n=new Ar(e),o=r?65536:0;function i(s,a){if(k){let f=_i(e)==="[!";if(s===f){var l=Yt();Q(l),n.anchor=l,Ne(!1),n.ensure(s,a),Ne(!0);return}}n.ensure(s,a)}Fe(()=>{var s=!1;t((a,l=!0)=>{s=!0,i(l,a)}),s||i(!1,null)},o)}function cm(e,t,r){if(!t||t===kc(String(r??"")))return;let n,o=e.__svelte_meta?.loc;o?n=`near ${o.file}:${o.line}:${o.column}`:Je?.[Ge]&&(n=`in ${Je[Ge]}`),Wf(Hi(n))}function Aa(e,t,r=!1,n=!1,o=!1){var i=e,s="";rn(()=>{var a=T;if(s===(s=t()??"")){k&&ge();return}if(a.nodes_start!==null&&(da(a.nodes_start,a.nodes_end),a.nodes_start=a.nodes_end=null),s!==""){if(k){for(var l=Y.data,f=ge(),d=f;f!==null&&(f.nodeType!==Le||f.data!=="");)d=f,f=we(f);if(f===null)throw Nr(),Ft;b&&!o&&cm(f.parentNode,l,s),rr(Y,d),i=Q(f);return}var u=s+"";r?u=`<svg>${u}</svg>`:n&&(u=`<math>${u}</math>`);var c=So(u);if((r||n)&&(c=_e(c)),rr(_e(c),c.lastChild),r||n)for(;_e(c);)i.before(_e(c));else i.before(c)}})}function ya(e,t){bt(()=>{var r=e.getRootNode(),n=r.host?r:r.head??r.ownerDocument.head;if(!n.querySelector("#"+t.hash)){let o=document.createElement("style");o.id=t.hash,o.textContent=t.code,n.appendChild(o),b&&Pc(t.hash,o)}})}var Lc=[...` 	
\r\f\xA0\v\uFEFF`];function Bc(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var o in r)if(r[o])n=n?n+" "+o:o;else if(n.length)for(var i=o.length,s=0;(s=n.indexOf(o,s))>=0;){var a=s+i;(s===0||Lc.includes(n[s-1]))&&(a===n.length||Lc.includes(n[a]))?n=(s===0?"":n.substring(0,s))+n.substring(a+1):s=a}}return n===""?null:n}function Mc(e,t=!1){var r=t?" !important;":";",n="";for(var o in e){var i=e[o];i!=null&&i!==""&&(n+=" "+o+": "+i+r)}return n}function wa(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Oc(e,t){if(t){var r="",n,o;if(Array.isArray(t)?(n=t[0],o=t[1]):n=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,s=0,a=!1,l=[];n&&l.push(...Object.keys(n).map(wa)),o&&l.push(...Object.keys(o).map(wa));var f=0,d=-1;let A=e.length;for(var u=0;u<A;u++){var c=e[u];if(a?c==="/"&&e[u-1]==="*"&&(a=!1):i?i===c&&(i=!1):c==="/"&&e[u+1]==="*"?a=!0:c==='"'||c==="'"?i=c:c==="("?s++:c===")"&&s--,!a&&i===!1&&s===0){if(c===":"&&d===-1)d=u;else if(c===";"||u===A-1){if(d!==-1){var p=wa(e.substring(f,d).trim());if(!l.includes(p)){c!==";"&&u++;var g=e.substring(f,u).trim();r+=" "+g+";"}}f=u+1,d=-1}}}}return n&&(r+=Mc(n)),o&&(r+=Mc(o,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function Vn(e,t,r,n,o,i){var s=e.__className;if(k||s!==r||s===void 0){var a=Bc(r,n,i);(!k||a!==e.getAttribute("class"))&&(a==null?e.removeAttribute("class"):t?e.className=a:e.setAttribute("class",a)),e.__className=r}else if(i&&o!==i)for(var l in i){var f=!!i[l];(o==null||f!==!!o[l])&&e.classList.toggle(l,f)}return i}function xa(e,t={},r,n){for(var o in r){var i=r[o];t[o]!==i&&(r[o]==null?e.style.removeProperty(o):e.style.setProperty(o,i,n))}}function Mr(e,t,r,n){var o=e.__style;if(k||o!==t){var i=Oc(t,n);(!k||i!==e.getAttribute("style"))&&(i==null?e.removeAttribute("style"):e.style.cssText=i),e.__style=t}else n&&(Array.isArray(n)?(xa(e,r?.[0],n[0]),xa(e,r?.[1],n[1],"important")):xa(e,r,n));return n}var Am=Symbol("class"),ym=Symbol("style"),wm=Symbol("is custom element"),xm=Symbol("is html");function Ca(e){if(k){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var n=e.value;Mo(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var o=e.checked;Mo(e,"checked",null),e.checked=o}}};e.__on_r=r,Ie(r),Yi()}}function Mo(e,t,r,n){var o=Em(e);if(k&&(o[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")){n||km(e,t,r??"");return}o[t]!==(o[t]=r)&&(t==="loading"&&(e[wf]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Cm(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Em(e){return e.__attributes??(e.__attributes={[wm]:e.nodeName.includes("-"),[xm]:e.namespaceURI===Of})}var Fc=new Map;function Cm(e){var t=e.getAttribute("is")||e.nodeName,r=Fc.get(t);if(r)return r;Fc.set(t,r=[]);for(var n,o=e,i=Element.prototype;i!==o;){n=ui(o);for(var s in n)n[s].set&&r.push(s);o=Vr(o)}return r}function km(e,t,r){b&&(t==="srcset"&&Tm(e,r)||Ea(e.getAttribute(t)??"",r)||Yf(t,e.outerHTML.replace(e.innerHTML,e.innerHTML&&"..."),String(r)))}function Ea(e,t){return e===t?!0:new URL(e,document.baseURI).href===new URL(t,document.baseURI).href}function Yc(e){return e.split(",").map(t=>t.trim().split(" ").filter(Boolean))}function Tm(e,t){var r=Yc(e.srcset),n=Yc(t);return n.length===r.length&&n.every(([o,i],s)=>i===r[s][1]&&(Ea(r[s][0],o)||Ea(o,r[s][0])))}function ka(e,t,r=t){sa(e,"change",n=>{var o=n?e.defaultChecked:e.checked;r(o)}),(k&&e.defaultChecked!==e.checked||W(t)==null)&&r(e.checked),be(()=>{var n=t();e.checked=!!n})}function Ta(e=!1){let t=H,r=t.l.u;if(!r)return;let n=()=>nn(t.s);if(e){let o=0,i={},s=Jr(()=>{let a=!1,l=t.s;for(let f in l)l[f]!==i[f]&&(i[f]=l[f],a=!0);return a&&o++,o});n=()=>$(s)}r.b.length&&No(()=>{Vc(t,n),xn(r.b)}),On(()=>{let o=W(()=>r.m.map(yf));return()=>{for(let i of o)typeof i=="function"&&i()}}),r.a.length&&On(()=>{Vc(t,n),xn(r.a)})}function Vc(e,t){if(e.l.s)for(let r of e.l.s)$(r);t()}function zi(e,t,r){if(e==null)return t(void 0),r&&r(void 0),He;let n=W(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}var Hn=[];function sn(e,t=He){let r=null,n=new Set;function o(a){if(vi(e,a)&&(e=a,r)){let l=!Hn.length;for(let f of n)f[1](),Hn.push(f,e);if(l){for(let f=0;f<Hn.length;f+=2)Hn[f][0](Hn[f+1]);Hn.length=0}}}function i(a){o(a(e))}function s(a,l=He){let f=[a,l];return n.add(f),n.size===1&&(r=t(o,i)||He),a(e),()=>{n.delete(f),n.size===0&&r&&(r(),r=null)}}return{set:o,update:i,subscribe:s}}function Zi(e){let t;return zi(e,r=>t=r)(),t}var qi=!1,Na=Symbol();function Gn(e,t,r){let n=r[t]??(r[t]={store:null,source:vt(void 0),unsubscribe:He});if(b&&(n.source.label=t),n.store!==e&&!(Na in r))if(n.unsubscribe(),n.store=e??null,e==null)n.source.v=void 0,n.unsubscribe=He;else{var o=!0;n.unsubscribe=zi(e,i=>{o?n.source.v=i:ce(n.source,i)}),o=!1}return e&&Na in r?Zi(e):$(n.source)}function Pa(){let e={};function t(){De(()=>{for(var r in e)e[r].unsubscribe();ye(e,Na,{enumerable:!1,value:!0})})}return[e,t]}function Ia(e){var t=qi;try{return qi=!1,[e(),qi]}finally{qi=t}}function jn(e,t,r,n){var o=!Wt||(r&2)!==0,i=(r&8)!==0,s=(r&16)!==0,a=n,l=!0,f=()=>(l&&(l=!1,a=s?W(n):n),a),d;if(i){var u=Te in e||uo in e;d=Ve(e,t)?.set??(u&&t in e?D=>e[t]=D:void 0)}var c,p=!1;i?[c,p]=Ia(()=>e[t]):c=e[t],c===void 0&&n!==void 0&&(c=f(),d&&(o&&$f(t),d(c)));var g;if(o?g=()=>{var D=e[t];return D===void 0?f():(l=!0,D)}:g=()=>{var D=e[t];return D!==void 0&&(a=void 0),D===void 0?a:D},o&&(r&4)===0)return g;if(d){var A=e.$$legacy;return(function(D,N){return arguments.length>0?((!o||!N||A||p)&&d(N?g():D),D):g()})}var _=!1,v=((r&1)!==0?Jr:Kr)(()=>(_=!1,g()));b&&(v.label=t),i&&$(v);var B=T;return(function(D,N){if(arguments.length>0){let j=N?$(v):o&&i?br(D):D;return ce(v,j),_=!0,a!==void 0&&(a=j),D}return $t&&_||(B.f&16384)!==0?v.v:$(v)})}function Hc(e){return new $a(e)}var yr,At,$a=class{constructor(t){V(this,yr);V(this,At);var r=new Map,n=(i,s)=>{var a=vt(s,!1,!1);return r.set(i,a),a};let o=new Proxy({...t.props||{},$$events:{}},{get(i,s){return $(r.get(s)??n(s,Reflect.get(i,s)))},has(i,s){return s===uo?!0:($(r.get(s)??n(s,Reflect.get(i,s))),Reflect.has(i,s))},set(i,s,a){return ce(r.get(s)??n(s,a),a),Reflect.set(i,s,a)}});L(this,At,(t.hydrate?va:Wn)(t.component,{target:t.target,anchor:t.anchor,props:o,context:t.context,intro:t.intro??!1,recover:t.recover})),!Xe&&(!t?.props?.$$host||t.sync===!1)&&Ln(),L(this,yr,o.$$events);for(let i of Object.keys(h(this,At)))i==="$set"||i==="$destroy"||i==="$on"||ye(this,i,{get(){return h(this,At)[i]},set(s){h(this,At)[i]=s},enumerable:!0});h(this,At).$set=i=>{Object.assign(o,i)},h(this,At).$destroy=()=>{Do(h(this,At))}}$set(t){h(this,At).$set(t)}$on(t,r){h(this,yr)[t]=h(this,yr)[t]||[];let n=(...o)=>r.call(this,...o);return h(this,yr)[t].push(n),()=>{h(this,yr)[t]=h(this,yr)[t].filter(o=>o!==n)}}$destroy(){h(this,At).$destroy()}};yr=new WeakMap,At=new WeakMap;var Vm;typeof HTMLElement=="function"&&(Vm=class extends HTMLElement{constructor(t,r,n){super();J(this,"$$ctor");J(this,"$$s");J(this,"$$c");J(this,"$$cn",!1);J(this,"$$d",{});J(this,"$$r",!1);J(this,"$$p_d",{});J(this,"$$l",{});J(this,"$$l_u",new Map);J(this,"$$me");this.$$ctor=t,this.$$s=r,n&&this.attachShadow({mode:"open"})}addEventListener(t,r,n){if(this.$$l[t]=this.$$l[t]||[],this.$$l[t].push(r),this.$$c){let o=this.$$c.$on(t,r);this.$$l_u.set(r,o)}super.addEventListener(t,r,n)}removeEventListener(t,r,n){if(super.removeEventListener(t,r,n),this.$$c){let o=this.$$l_u.get(r);o&&(o(),this.$$l_u.delete(r))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(o){return i=>{let s=document.createElement("slot");o!=="default"&&(s.name=o),Lr(i,s)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let r={},n=Hm(this);for(let o of this.$$s)o in n&&(o==="default"&&!this.$$d.children?(this.$$d.children=t(o),r.default=!0):r[o]=t(o));for(let o of this.attributes){let i=this.$$g_p(o.name);i in this.$$d||(this.$$d[i]=Sa(i,o.value,this.$$p_d,"toProp"))}for(let o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=Hc({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:r,$$host:this}}),this.$$me=Wi(()=>{be(()=>{this.$$r=!0;for(let o of Is(this.$$c)){if(!this.$$p_d[o]?.reflect)continue;this.$$d[o]=this.$$c[o];let i=Sa(o,this.$$d[o],this.$$p_d,"toAttribute");i==null?this.removeAttribute(this.$$p_d[o].attribute||o):this.setAttribute(this.$$p_d[o].attribute||o,i)}this.$$r=!1})});for(let o in this.$$l)for(let i of this.$$l[o]){let s=this.$$c.$on(o,i);this.$$l_u.set(i,s)}this.$$l={}}}attributeChangedCallback(t,r,n){this.$$r||(t=this.$$g_p(t),this.$$d[t]=Sa(t,n,this.$$p_d,"toProp"),this.$$c?.$set({[t]:this.$$d[t]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)})}$$g_p(t){return Is(this.$$p_d).find(r=>this.$$p_d[r].attribute===t||!this.$$p_d[r].attribute&&r.toLowerCase()===t)||t}});function Sa(e,t,r,n){let o=r[e]?.type;if(t=o==="Boolean"&&typeof t!="boolean"?t!=null:t,!n||!r[e])return t;if(n==="toAttribute")switch(o){case"Object":case"Array":return t==null?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t??null;default:return t}else switch(o){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":return t;case"Number":return t!=null?+t:t;default:return t}}function Hm(e){let t={};return e.childNodes.forEach(r=>{t[r.slot||"default"]=!0}),t}if(b){let e=function(t){if(!(t in globalThis)){let r;Object.defineProperty(globalThis,t,{configurable:!0,get:()=>{if(r!==void 0)return r;Sf(t)},set:n=>{r=n}})}};e("$state"),e("$effect"),e("$derived"),e("$inspect"),e("$props"),e("$bindable")}function Da(e){H===null&&mo("onMount"),Wt&&H.l!==null?jm(H).m.push(e):On(()=>{let t=W(e);if(typeof t=="function")return t})}function Gc(e){H===null&&mo("onDestroy"),Da(()=>()=>W(e))}function jm(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}var jc;typeof window<"u"&&((jc=window.__svelte??(window.__svelte={})).v??(jc.v=new Set)).add("5");jf();var Bo=sn(new xt([],!1)),Qi=sn(new Date),Xi=sn([]),Ki=sn([]);var zm=Fn('<div><div class="event_item_contents svelte-1f12830"><div></div> <div class="ei_Item svelte-1f12830"><span class="ei_Title svelte-1f12830"> </span> <span class="ei_Copy svelte-1f12830"><!></span></div></div></div>'),Zm=Fn('<div><div class="aside__line filled__line svelte-1f12830"><div class="filled__line__completed svelte-1f12830"></div></div></div> <div class="events svelte-1f12830"></div> <div id="now-line" class="svelte-1f12830"><span class="timeline-time svelte-1f12830"> </span></div> <div id="scroll-controls" class="svelte-1f12830"><label for="auto-scroll" class="svelte-1f12830">Track time</label> <input id="auto-scroll" type="checkbox" class="toggle svelte-1f12830"/></div>',1),qm=Fn('<div class="empty-timeline svelte-1f12830">No Planner Data</div>'),Qm=Fn('<div id="day-planner-timeline-container" class="svelte-1f12830"><!></div>'),Xm={hash:"svelte-1f12830",code:`#day-planner-timeline-container.svelte-1f12830 {position:relative;}.aside.svelte-1f12830 {position:absolute;top:-1px;left:0;width:65px;height:100%;background-repeat:repeat-y;opacity:80%;}.aside-x5.svelte-1f12830 {background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAEsCAYAAADHIkNEAAAAAXNSR0IArs4c6QAAAFBlWElmTU0AKgAAAAgAAgESAAMAAAABAAEAAIdpAAQAAAABAAAAJgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFqADAAQAAAABAAABLAAAAAAuMW7GAAABWWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgpMwidZAAAAsElEQVR4Ae3ZMQoAIAgFUL3/ocsO0GBLFE9wESJ8jj8jYlQrAgQIECBAgAABAgQIECBAgAABAgQIECBAgACBbwWyNutGQuuNIkCAAAECBAgQIECAAAECBAgQIECAAAECBAgQeEbgJBLaLScq2smYEyBAgAABAgQIECBAgAABAgQIECBAgAABAgSuCpxEQqKfqyfzOQECBAgQIECAAAECBAgQIECAAAECBAgQIECgKzABwWUEBHBCyqYAAAAASUVORK5CYII=);}.aside-x4.svelte-1f12830 {background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAADwCAYAAAAEqZSkAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAeGVYSWZNTQAqAAAACAAEARIAAwAAAAEAAQAAARoABQAAAAEAAAA+ARsABQAAAAEAAABGh2kABAAAAAEAAABOAAAAAAAAAEgAAAABAAAASAAAAAEAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFqADAAQAAAABAAAA8AAAAABUK6+SAAAACXBIWXMAAAsTAAALEwEAmpwYAAACMWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjIyPC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjMwMDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgrL2/xqAAAA2klEQVR4Ae3bMQqEMBBA0QT2Bh7G+5d2e5G9wRZruliM6CCBsE8QQghxeOUHaynlvb/zPHUf9TXPuCYlQIAAAQIECBAgQIAAAQIECBAg8N8CLegtNwk+V863i7crB7sza7cev8y0ze/4MX2RAAECBAgQIECAAAECBAgQIECAAIEmkGmbkdyheWbaZnTxmOaZaZvRxJpnJGOfAAECBAgQIECAAAECBAgQIECAwEMCmbZ5aJjRHJm2OaZhnk189590DTPStE+AAAECBAgQIECAAAECBAgQIEBgVoEfgLcJ4JWKwMAAAAAASUVORK5CYII=);}.aside-x3.svelte-1f12830 {background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAC0CAYAAACQYNzeAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAeGVYSWZNTQAqAAAACAAEARIAAwAAAAEAAQAAARoABQAAAAEAAAA+ARsABQAAAAEAAABGh2kABAAAAAEAAABOAAAAAAAAAEgAAAABAAAASAAAAAEAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFqADAAQAAAABAAAAtAAAAAD5WFEbAAAACXBIWXMAAAsTAAALEwEAmpwYAAACMWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjIyPC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjMwMDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgrL2/xqAAAA6UlEQVRoBe3XQQrCQAwF0Bb0Hr2heB4v14MIOtmli8GmlFHhBQbimA7h7f48TdOjnf+pua16/Z91bUqAAAECBAgQIECAAAECHwQi58Wp1KsyfPpsbLsUX133zF/a0G3PYJq5p358GxSxdaWelWGzBAgQIECAAAECBAgQIDBUIHJenDNqTHiPbZcz1m1vrPmdIyE9f5/7MeE9KKohPW+Ze+E9a+gJECBAgAABAgQIECDwHYHIeXEqNSaM9zaKbZfen537tXO/uT4S0seE8c2a6UdQVEO6MJ4AtQQIECBAgAABAgQIECDwqwJv9lMMWDcoNMAAAAAASUVORK5CYII=);}.aside-x2.svelte-1f12830 {background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAB4CAYAAAD2SgIRAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAeGVYSWZNTQAqAAAACAAEARIAAwAAAAEAAQAAARoABQAAAAEAAAA+ARsABQAAAAEAAABGh2kABAAAAAEAAABOAAAAAAAAAEgAAAABAAAASAAAAAEAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFqADAAQAAAABAAAAeAAAAADVvVTBAAAACXBIWXMAAAsTAAALEwEAmpwYAAACMWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjIyPC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjMwMDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgrL2/xqAAAAt0lEQVRoBe3YMQqAMAyF4VYUD+Ii7p7JK7t4EkVsnOoSEtql+AuC2GdIPxxCYwhhS3c7V0ytju20S6cIIIAAAggg8EcBGVh658YvZ75uXDqenSV3S14YFkswy5gKZ3keEUAAAQQQQACBnwnI7NZV2vNdqY5eRjqe9Ih59ciTMm2u+YuC50/hgjr6p0Ix6BHz6mlOEkQAAQQQQAABBBwCMrBwtvmCcbbp+G+IIoAAAggggAACCDgFHqn/Cpqy3VM1AAAAAElFTkSuQmCC);}.aside-x1.svelte-1f12830 {background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAA8CAYAAABig0prAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAeGVYSWZNTQAqAAAACAAEARIAAwAAAAEAAQAAARoABQAAAAEAAAA+ARsABQAAAAEAAABGh2kABAAAAAEAAABOAAAAAAAAAEgAAAABAAAASAAAAAEAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFqADAAQAAAABAAAAPAAAAAB4zqpIAAAACXBIWXMAAAsTAAALEwEAmpwYAAACMWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjIyPC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjMwMDwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgrL2/xqAAAArElEQVRYCe2VSwqAMAxEW3WjK3eCHsT7H0bBQ/jp7LqokIQirUyhUMIkJA8y9c65Ndx6jg+tdvW0y05J4CcEsHmtcpZTqc8rR8eLsuQm0cOAeomwGA1Q4GrOrRFTSwIkkCCArWsScUvosiSpc9DxrM5KJ+xxGLY5xIHi3xbbfBuKdvpGhnESqJ8AvGJSjnFI9LDNUSKMNKLCkT7v0/LnffO35Z2T1UiABAol8ACZ6QleECm8BQAAAABJRU5ErkJggg==);}.aside__line.svelte-1f12830 {position:absolute;left:65px;transform:translateX(-50%);width:4px;height:100%;background:var(--aside-line);}.filled.svelte-1f12830 {transform-origin:top center;z-index:1;
        animation: scaleDown 1s ease-in-out;animation-fill-mode:forwards;}.filled__line__completed.svelte-1f12830 {position:absolute;top:0;left:0;width:100%;}.events.svelte-1f12830 {position:relative;padding-bottom:50px;}.event_item.svelte-1f12830 {background-color:var(--event-color);border-bottom:2px solid var(--background-primary);margin:0;cursor:pointer;padding:5px 10px 10px 0;width:100%;overflow:hidden;}.event_item.short.svelte-1f12830 {padding:0;}.event_item.svelte-1f12830:hover {background-color:var(--event-hover);box-shadow:0px 0px 52px -18px rgba(0, 0, 0, 0.75);}.event_item_contents.svelte-1f12830 {padding-left:58px;}.ei_Copy.svelte-1f12830,
    .ei_Title.svelte-1f12830 {color:var(--text-on-accent);}.ei_Dot.svelte-1f12830 {display:inline-block;position:absolute;border-radius:50%;width:14px;height:14px;margin-top:5px;background-color:var(--aside-dot);box-shadow:0px 0px 52px -18px rgba(0, 0, 0, 0.75);z-index:2;}.dot_active.svelte-1f12830 {background-color:var(--active-dot);}.ei_Item.svelte-1f12830 {padding-left:40px;text-indent:-20px;}.ei_Title.svelte-1f12830 {padding-right:10px;}.ei_Copy.svelte-1f12830 {font-size:15px;}.header_title.svelte-1f12830,
    .ei_Title.svelte-1f12830,
    .ce_title.svelte-1f12830 {color:#fff;}#now-line.svelte-1f12830 {height:4px;background-color:darkred;opacity:80%;position:absolute;z-index:3;width:100%;}#now-line.svelte-1f12830 .timeline-time:where(.svelte-1f12830) {position:relative;left:5px;top:0;background-color:darkred;color:#fff;padding:0 4px 2px 4px;border-radius:0 0 4px 4px;text-align:center;}#scroll-controls.svelte-1f12830 {background-color:var(--background-secondary);position:sticky;bottom:0;width:100%;z-index:4;padding:8px 15px;text-align:center;height:45px;}#scroll-controls.svelte-1f12830 label:where(.svelte-1f12830) {display:block;float:left;margin:2px;}#scroll-controls.svelte-1f12830 .toggle:where(.svelte-1f12830) {-webkit-appearance:none;-moz-appearance:none;appearance:none;width:50px;height:20px;display:block;float:left;position:relative;margin-top:5px;border-radius:50px;overflow:hidden;outline:none;border:none;cursor:pointer;background-color:var(--background-secondary-alt);transition:background-color ease 0.3s;}#scroll-controls.svelte-1f12830 .toggle:where(.svelte-1f12830):before {content:"on    ";display:block;position:absolute;z-index:2;width:17px;height:17px;background:#fff;left:2px;top:1px;border-radius:50%;font:9px/18px Helvetica;text-transform:uppercase;font-weight:bold;text-indent:-24px;word-spacing:30px;color:#fff;text-shadow:-1px -1px rgba(0, 0, 0, 0.15);white-space:nowrap;box-shadow:0 1px 2px rgba(0, 0, 0, 0.2);transition:all cubic-bezier(0.3, 1.5, 0.7, 1) 0.3s;}#scroll-controls.svelte-1f12830 .toggle:where(.svelte-1f12830):checked {background-color:var(--interactive-accent);}#scroll-controls.svelte-1f12830 .toggle:where(.svelte-1f12830):checked:before {left:31px;}#scroll-controls.svelte-1f12830 input[type="checkbox"]:where(.svelte-1f12830):checked:after {background-color:transparent;}.empty-timeline.svelte-1f12830 {text-align:center;vertical-align:middle;margin-top:50%;}`};function Ra(e,t){_o(t,!1),ya(e,Xm);let r=()=>Gn(Qi,"$now",s),n=()=>Gn(Bo,"$planSummary",s),o=()=>Gn(Xi,"$timelineColors",s),i=()=>Gn(Ki,"$timelineHoverColors",s),[s,a]=Pa(),l=window.moment,f=/\[([^\]]+)\]\(([^)]+)\)/g,d=/\[\[([^\]|]+)(\|([^\]]+))?\]\]/g,u=/__(\S(?:.*\S)?)__|\*\*(\S(?:.*\S)?)\*\*/g,c=/_(\S(?:.*\S)?)_|\*(\S(?:.*\S)?)\*/g,p=/==(\S(?:.*\S)?)==/g,g=jn(t,"lineColor",8),A=jn(t,"zoomLevel",8),_=jn(t,"rootEl",8),v=jn(t,"settings",8);z.getInstance().logDebug("TimelineView.onOpen",{zoomLevel:A(),rootEl:_()});let B=vt(0),D=vt(0),N=vt(!0),j=null;function M(K){return l.duration(l(K).format("HH:mm")).asMinutes()*A()}Da(()=>{R()}),Gc(()=>{I(),j&&clearTimeout(j)});function y(K){let oe=[];return K.durationMins<75/A()&&oe.push("short"),K.isPast&&oe.push("past"),K.isBreak&&oe.push("break"),oe.join(" ")}function E(K){let oe=K.text??"";return oe=oe.replace(f,(We,yt,ir)=>yt).replace(d,(We,yt,ir,Br)=>Br||yt).replace(u,(We,yt,ir)=>`<strong>${yt||ir}</strong>`).replace(c,(We,yt,ir)=>`<em>${yt||ir}</em>`).replace(p,"<mark>$1</mark>"),oe}function R(){_().addEventListener("scroll",F)}function I(){_().removeEventListener("scroll",F)}function O(K){$(N)&&!n().current?.isEnd&&(I(),_().scrollTo({left:0,top:K,behavior:"smooth"}),setTimeout(R,1e3))}function F(){ce(N,!1),v().autoResumeScroll&&(j&&clearTimeout(j),j=setTimeout(()=>{ce(N,!0),j=null},v().autoResumeScrollDelay))}fa(()=>(r(),n(),$(B),nn(A())),()=>{let K=r(),oe=n(),We=oe.items.first();ce(B,oe.empty?0:M(K)-M(We.time)),ce(D,oe.empty?0:We.time.getMinutes()*A()*-1-1),O($(B)-150)}),ca(),Ta();var U=Qm(),ue=it(U);{var Rt=K=>{var oe=Zm(),We=ia(oe),yt=it(We),ir=it(yt);je(yt),je(We);var Br=Dr(We,2);qs(Br,5,()=>(n(),W(()=>n().activeItems())),Zs,(zn,lt,Fo)=>{var an=zm(),Oa=it(an),Fa=it(Oa),Ya=Dr(Fa,2),es=it(Ya),Zc=it(es,!0);je(es);var Wa=Dr(es,2),qc=it(Wa);Aa(qc,()=>($(lt),W(()=>E($(lt))))),je(Wa),je(Ya),je(Oa),je(an),rn(Qc=>{Vn(an,1,`event_item ${Qc??""}`,"svelte-1f12830"),Mr(an,`height: ${$(lt),nn(A()),W(()=>$(lt).durationMins*A())??""}px; --event-color: ${o(),W(()=>o()[Fo])??""}; --event-hover: ${i(),W(()=>i()[Fo])??""};`),Mo(an,"data-title",($(lt),W(()=>$(lt).rawTime))),Vn(Fa,1,`ei_Dot ${$(lt),n(),W(()=>$(lt)===n().current?"dot_active":"")??""}`,"svelte-1f12830"),Gi(Zc,($(lt),W(()=>$(lt).rawTime)))},[()=>($(lt),W(()=>y($(lt))))]),Lr(zn,an)}),je(Br);var sr=Dr(Br,2),La=it(sr),zc=it(La,!0);je(La),je(sr);var Ma=Dr(sr,2),Ba=Dr(it(Ma),2);Ca(Ba),je(Ma),rn(zn=>{Vn(We,1,`aside aside-x${A()??""} filled`,"svelte-1f12830"),Mr(We,`top: ${$(D)??""}px;`),Mr(ir,`height: ${$(B)??""}px;`),Mr(sr,`top:${$(B)??""}px; display: ${n(),W(()=>n().current&&!n().current.isEnd?"block":"none")??""}`),Gi(zc,zn)},[()=>(r(),W(()=>l(r()).format("HH:mm")))]),ka(Ba,()=>$(N),zn=>ce(N,zn)),Lr(K,oe)},or=K=>{var oe=qm();Lr(K,oe)};ba(ue,K=>{n(),W(()=>n().items.length>0)?K(Rt):K(or,!1)})}je(U),rn(()=>Mr(U,`--aside-line: color-mix(in srgb, ${g()??""} 40%, transparent); --aside-dot: color-mix(in srgb, ${g()??""} 60%, transparent); --active-dot: ${g()??""}`)),Lr(e,U),go(),a()}var Oo=class extends Uc.ItemView{constructor(t,r,n){super(t),this.config=r,Bo.set(n)}getViewType(){return ln}getDisplayText(){return"Day Planner Timeline"}getIcon(){return this.config.current().timelineIcon}update(t){let r=this.config.current();if(!this.colors||t.items.length!==this.colors.length){let n=r.timelineColorBegin||ie.timelineColorBegin,o=r.timelineColorEnd||ie.timelineColorEnd,i=r.timelineHoverColorBegin||ie.timelineHoverColorBegin,s=r.timelineHoverColorEnd||ie.timelineHoverColorEnd;this.colors=Ps.scale([n,o]).mode("lch").colors(t.items.length,"hex"),this.hoverColors=Ps.scale([i,s]).mode("lch").colors(t.items.length,"hex"),Xi.set(this.colors),Ki.set(this.hoverColors)}Bo.set(t),Qi.set(new Date)}async onOpen(){let t=this.config.current();this.component=Wn(Ra,{target:this.contentEl,props:{lineColor:t.lineColor||ie.lineColor,zoomLevel:t.timelineZoomLevel||4,rootEl:this.contentEl,settings:t}})}async onClose(){Do(this.component)}};var Ji=class extends Un.Plugin{constructor(){super(...arguments);this.current=()=>this.settings;this.layoutReady=async()=>{let r=this.syncPlugin?.instance!==void 0;this.device=r?this.syncPlugin.instance.deviceName.length>0?this.syncPlugin.instance.deviceName:this.syncPlugin.instance.getDefaultDeviceName():"Unknown";let n=new oo;this.plannerMD=new un(this.app.workspace,this,this.file,this.parser,n),this.statusBar=new io(this,this.addStatusBarItem(),this.app.workspace,n,new un(this.app.workspace,this,this.file,this.parser,n),this.file),this.statusBar.initStatusBar(),await this.tick(),this.setTicker(),window.dayPlanner={resolvePath:this.resolvePath.bind(this)}};this.onExternalSettingsChange=(0,Un.debounce)(async()=>{z.getInstance().logInfo("external settings changed"),this.settings=Object.assign({},this.settings,await this.loadData()),this.parser.updateSettings(),await this.writerInfo()},2e3,!0);this.codeMirror=r=>{this.settings.activePlan.notePath&&this.plannerMD.checkIsDayPlannerEditing(this.settings.activePlan.notePath)}}get syncPlugin(){return this.app.internalPlugins.getPluginById("sync")}async onload(){this.settings=Object.assign(new Wo,await this.loadData()),al(this.settings)&&await this.save(),z.getInstance().updateSettings(this),z.getInstance().logInfo(`Loading Day Planner plugin v${this.manifest.version}`),this.vault=this.app.vault,this.parser=new no(this),this.file=new ro(this.vault,this),this.registerEvent(this.app.vault.on("modify",this.codeMirror,"")),this.addCommand({id:"app:add-to-note",name:"Add a Day Planner template for today to the current note",callback:()=>this.modeGuard(async()=>await this.insertDayPlannerIntoCurrentNote(!0)),hotkeys:[]}),this.addCommand({id:"app:link-to-note",name:"Link today's Day Planner to the current note",callback:()=>this.modeGuard(async()=>await this.insertDayPlannerIntoCurrentNote(!1)),hotkeys:[]}),this.addCommand({id:"app:unlink-from-note",name:"Unlink today's Day Planner from its note",callback:()=>this.modeGuard(async()=>await this.unlinkDayPlanner()),hotkeys:[]}),this.addCommand({id:"app:show-timeline",name:"Show the Day Planner Timeline",callback:()=>this.initLeaf(),hotkeys:[]}),this.addCommand({id:"app:show-today-note",name:"Show today's Day Planner",callback:()=>{this.settings.activePlan.notePath&&this.app.workspace.openLinkText(this.settings.activePlan.notePath,"",!0)},hotkeys:[]}),this.addCommand({id:"app:set-as-writer",name:"Set current device as writer",callback:async()=>{this.settings.writer=this.device,await this.save(),await this.writerInfo()},hotkeys:[]}),this.registerView(ln,r=>(this.timelineView=new Oo(r,this,new xt([],this.isWriter())),this.timelineView)),this.addSettingTab(new jo(this.app,this)),this.register(()=>{window.dayPlanner=void 0}),this.app.workspace.onLayoutReady(this.layoutReady)}async onunload(){this.interval&&(z.getInstance().logDebug("Clearing ticker"),window.clearInterval(this.interval))}async handleConfigFileChange(){await super.handleConfigFileChange(),this.onExternalSettingsChange()}async writerInfo(){z.getInstance().logInfo("update Device/Writer:",this.device,this.isWriter(),this.settings.mode,this.settings.writer,this.settings.activePlan)}isWriter(){return this.device==="Unknown"||!this.settings.writer||this.settings.writer===this.device}setTicker(){this.interval&&(z.getInstance().logDebug("Clearing ticker"),window.clearInterval(this.interval),this.interval=void 0),z.getInstance().logDebug("set Ticker with Device/Writer:",this.device,this.settings.writer,this.isWriter()),this.interval=window.setInterval(()=>this.tick(),2e3)}async tick(){try{let r=new Date,n=this.settings.activePlan;if(this.settings.activePlan.notePath){let o=new Date(this.settings.activePlan.anchorDate);(r.getTime()-o.getTime())/(1e3*60*60)>=24&&(this.settings.activePlan={})}if(this.isWriter()&&!this.settings.activePlan.notePath&&this.settings.mode!=="Command"&&await this.rotateOrCreatePlan(),this.settings.activePlan.notePath){let o=await this.plannerMD.processDayPlanner(this.isWriter(),this.settings.activePlan.notePath);await this.statusBar.refreshStatusBar(o),this.timelineView?.update(o)}else if(this.settings.mode==="Daily"){let o=new xt([],this.isWriter());await this.statusBar.refreshStatusBar(o),this.timelineView?.update(o)}n.notePath!==this.settings.activePlan.notePath&&this.save()}catch(r){z.getInstance().logError("error refreshing plan (tick)",r)}}initLeaf(){this.app.workspace.getLeavesOfType(ln).length>0||this.app.workspace.getRightLeaf(!0).setViewState({type:ln})}modeGuard(r){if(this.settings.mode!=="Command"){new Notification("Day Planner plugin in File mode",{silent:!0,body:"Switch to Command mode in settings to use this command"});return}r()}async rotateOrCreatePlan(){let r=this.parser.getAnchorDate(),n=await this.file.createDailyNote(r);if(n){this.settings.activePlan={notePath:n,anchorDate:r.getTime()},await this.save();let o=await this.plannerMD.processDayPlanner(this.isWriter(),n);await this.statusBar.refreshStatusBar(o),this.timelineView?.update(o)}else{this.settings.activePlan={},await this.save();let o=new xt([],this.isWriter());await this.statusBar.refreshStatusBar(o),this.timelineView?.update(o)}}async insertDayPlannerIntoCurrentNote(r){try{let o=this.app.workspace.getActiveViewOfType(Un.MarkdownView).file.path;if(this.settings.activePlan.notePath&&this.settings.activePlan.notePath!==o){new Notification("Day Planner exists",{silent:!0,body:`A Day Planner for today already exists in ${this.settings.activePlan.notePath}`});return}if(r&&this.plannerMD.insertPlanner(o),!this.settings.activePlan.notePath){let i=this.parser.getAnchorDate();this.settings.activePlan={notePath:o,anchorDate:i.getTime()},await this.save()}}catch(n){console.error(n)}}async unlinkDayPlanner(){try{if(!this.settings.activePlan.notePath)return;let r=this.settings.activePlan.notePath;this.settings.activePlan={},await this.save(),this.statusBar.hide(this.statusBar.statusBar),this.timelineView?.update(new xt([],this.isWriter())),new Notification("Day Planner reset",{silent:!0,body:`The Day Planner for today has been dissociated from ${r} and can be added to another note`})}catch(r){console.error(r)}}async save(){await this.saveData(this.settings)}resolvePath(r){return this.settings.activePlan.notePath&&this.app.metadataCache.getFirstLinkpathDest(r,this.settings.activePlan.notePath).path||""}};
/*! Bundled license information:

chroma-js/src/utils/contrastAPCA.js:
  (**
   * @license
   *
   * The APCA contrast prediction algorithm is based of the formulas published
   * in the APCA-1.0.98G specification by Myndex. The specification is available at:
   * https://raw.githubusercontent.com/Myndex/apca-w3/master/images/APCAw3_0.1.17_APCA0.0.98G.svg
   *
   * Note that the APCA implementation is still beta, so please update to
   * future versions of chroma.js when they become available.
   *
   * You can read more about the APCA Readability Criterion at
   * https://readtech.org/ARC/
   *)
*/

/* nosourcemap */